<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Codeforces Round 631 Div.2 é¢˜è§£</title>
      <link href="/2787163714/"/>
      <url>/2787163714/</url>
      
        <content type="html"><![CDATA[<p>åœºä¸Šå¯èƒ½å¿˜è®°å¸¦ğŸ§ äº†<br><a id="more"></a></p><h2 id="1330A-Dreamoon-and-Ranking-Collection"><a href="#1330A-Dreamoon-and-Ranking-Collection" class="headerlink" title="1330A Dreamoon and Ranking Collection"></a>1330A Dreamoon and Ranking Collection</h2><p>ä¸€åˆ—$[1,100]$çš„æ•°ï¼Œå¯ä»¥å‘å…¶è¡¥$x$ä¸ªæ•°ï¼Œé—®ä»$[1,k]$éƒ½å‡ºç°è¿‡æ‰“çš„æœ€å¤§çš„$k$æ˜¯å¤šå°‘ã€‚</p><p>å‰ç¼€å’Œæ‰¾ä¸€ä¸‹æœ€å¤§çš„$k - cnt[k] = x$ï¼Œ$O(n)$ã€‚</p><figure class="highlight cpp"><figcaption><span>A.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, x;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; x;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">205</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, t; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">            a[t] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">200</span>; ++i) &#123;</span><br><span class="line">            a[i] += a[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (i - a[i] == x) ans = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1330B-Dreamoon-Likes-Permutations"><a href="#1330B-Dreamoon-Likes-Permutations" class="headerlink" title="1330B Dreamoon Likes Permutations"></a>1330B Dreamoon Likes Permutations</h2><p>ç°åœ¨æœ‰ä¸ªåºåˆ—$a$ï¼Œé—®æŠŠ$a$åˆ†ä¸ºä¸¤æ®µï¼Œä¸”ä¸¤æ®µéƒ½æ˜¯æ’åˆ—çš„æ–¹æ¡ˆæ•°ã€‚</p><p>åˆ†åˆ«è®°ä¸€ä¸‹æ¯ä¸ªä½ç½®ä»å¤´ä»å°¾çš„æ–¹å‘æ˜¯å¦æ˜¯æ’åˆ—ï¼Œç„¶åæšä¸¾åˆ†ç•Œç‚¹ã€‚<br>$O(n\log n)$ï¼ˆæˆ‘è¿™é‡Œç”¨äº†çº¿æ®µæ ‘åˆ¤æ–­æ˜¯å¦æ˜¯æ’åˆ—ï¼Œåº”è¯¥æœ‰åˆ«çš„åšæ³•ï¼‰</p><figure class="highlight excel"><figcaption><span>B.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">namespace data_struct &#123;</span><br><span class="line">    class segment_tree &#123;</span><br><span class="line">#define nd node[<span class="built_in">now</span>]</span><br><span class="line">#define ndl node[<span class="built_in">now</span> &lt;&lt; <span class="number">1</span>]</span><br><span class="line">#define ndr node[<span class="built_in">now</span> &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]</span><br><span class="line">#define <span class="built_in">mid</span> ((nd.l + nd.r) &gt;&gt; <span class="number">1</span>)</span><br><span class="line">    publ<span class="symbol">ic:</span></span><br><span class="line">        struct segment_node &#123;</span><br><span class="line">            <span class="built_in">int</span> l, r, val;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span> nn;</span><br><span class="line">        vector&lt;segment_node&gt; node;</span><br><span class="line"></span><br><span class="line">        void pushup(<span class="built_in">int</span> <span class="built_in">now</span>) &#123;</span><br><span class="line">            nd.val = ndl.val + ndr.val;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        void build(<span class="built_in">int</span> s, <span class="built_in">int</span> <span class="built_in">t</span>, <span class="built_in">int</span> <span class="built_in">now</span> = <span class="number">1</span>) &#123;</span><br><span class="line">            nd.l = s, nd.r = <span class="built_in">t</span>;</span><br><span class="line">            <span class="built_in">if</span> (s == <span class="built_in">t</span>) &#123;</span><br><span class="line">                nd.val = <span class="number">0</span>;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            build(s, (s + <span class="built_in">t</span>) &gt;&gt; <span class="number">1</span>, <span class="built_in">now</span> &lt;&lt; <span class="number">1</span>);</span><br><span class="line">            build(((s + <span class="built_in">t</span>) &gt;&gt; <span class="number">1</span>) + <span class="number">1</span>, <span class="built_in">t</span>, <span class="built_in">now</span> &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">            pushup(<span class="built_in">now</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        void update(<span class="built_in">int</span> s, <span class="built_in">int</span> <span class="built_in">t</span>, <span class="built_in">int</span> x, <span class="built_in">int</span> <span class="built_in">now</span> = <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">if</span> (s &lt;= nd.l &amp;&amp; <span class="built_in">t</span> &gt;= nd.r) &#123;</span><br><span class="line">                nd.val |= <span class="number">1</span>;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">if</span> (s &lt;= <span class="built_in">mid</span>)</span><br><span class="line">                update(s, <span class="built_in">t</span>, x, <span class="built_in">now</span> &lt;&lt; <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">if</span> (<span class="built_in">t</span> &gt; <span class="built_in">mid</span>)</span><br><span class="line">                update(s, <span class="built_in">t</span>, x, <span class="built_in">now</span> &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">            pushup(<span class="built_in">now</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span> query(<span class="built_in">int</span> s, <span class="built_in">int</span> <span class="built_in">t</span>, <span class="built_in">int</span> <span class="built_in">now</span> = <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">if</span> (s &lt;= nd.l &amp;&amp; <span class="built_in">t</span> &gt;= nd.r) &#123;</span><br><span class="line">                return nd.val;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">int</span> ret = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">if</span> (s &lt;= <span class="built_in">mid</span>) &#123;</span><br><span class="line">                ret += query(s, <span class="built_in">t</span>, <span class="built_in">now</span> &lt;&lt; <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">if</span> (<span class="built_in">t</span> &gt; <span class="built_in">mid</span>) &#123;</span><br><span class="line">                ret += query(s, <span class="built_in">t</span>, <span class="built_in">now</span> &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            return ret;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        void init(<span class="built_in">int</span> nnn) &#123;</span><br><span class="line">            nn = nnn;</span><br><span class="line">            node.resize(nn &lt;&lt; <span class="number">2</span> | <span class="number">3</span>);</span><br><span class="line">            build(<span class="number">1</span>, nn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; tree;</span><br><span class="line">&#125;</span><br><span class="line">using namespace data_struct;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> main() &#123;</span><br><span class="line">    <span class="built_in">int</span> q;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    while (q--) &#123;</span><br><span class="line">        <span class="built_in">int</span> <span class="built_in">n</span>;</span><br><span class="line">        cin &gt;&gt; <span class="built_in">n</span>;</span><br><span class="line"></span><br><span class="line">        tree.init(<span class="built_in">n</span>);</span><br><span class="line">        vector&lt;<span class="built_in">int</span>&gt; a(<span class="built_in">n</span> + <span class="number">5</span>), pre(<span class="built_in">n</span> + <span class="number">5</span>), suf(<span class="built_in">n</span> + <span class="number">5</span>);</span><br><span class="line">        for (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= <span class="built_in">n</span>; ++i) &#123;</span><br><span class="line">            cin &gt;&gt; a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        for (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= <span class="built_in">n</span>; ++i) &#123;</span><br><span class="line">            tree.update(a[i], a[i], <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">if</span> (tree.query(<span class="number">1</span>, i) == i)</span><br><span class="line">                pre[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        tree.init(<span class="built_in">n</span>);</span><br><span class="line">        for (<span class="built_in">int</span> i = <span class="built_in">n</span>; i &gt; <span class="number">0</span>; --i) &#123;</span><br><span class="line">            tree.update(a[i], a[i], <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">if</span> (tree.query(<span class="number">1</span>, <span class="built_in">n</span> - i + <span class="number">1</span>) == <span class="built_in">n</span> - i + <span class="number">1</span>)</span><br><span class="line">                suf[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        vector&lt;pii&gt; ans;</span><br><span class="line">        for (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; <span class="built_in">n</span>; ++i) &#123;</span><br><span class="line">            <span class="built_in">if</span> (pre[i] &amp;&amp; suf[i + <span class="number">1</span>])</span><br><span class="line">                ans.emplace_back(i, <span class="built_in">n</span> - i);</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; ans.size() &lt;&lt; endl;</span><br><span class="line">        for (pii i <span class="symbol">:</span> ans)</span><br><span class="line">            cout &lt;&lt; i.first &lt;&lt; ' ' &lt;&lt; i.second &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1329A-Dreamoon-Likes-Coloring"><a href="#1329A-Dreamoon-Likes-Coloring" class="headerlink" title="1329A Dreamoon Likes Coloring"></a>1329A Dreamoon Likes Coloring</h2><p>æœ‰$n$ä¸ªä½ç½®ï¼Œ$m$ä¸ªé¢œè‰²ï¼Œæ¯ä¸ªé¢œè‰²æ¶‚é•¿$l_i$çš„æ®µï¼Œé—®èƒ½å¦è®©æ¯ä¸ªæ ¼å­éƒ½è¢«æ¶‚è‰²ï¼Œä¸”æœ€ç»ˆæ¯ä¸ªé¢œè‰²è‡³å°‘ç•™ä¸‹ä¸€æ ¼ã€‚</p><p>å› ä¸ºæ¯ä¸ªé¢œè‰²åªæ¶‚ä¸€æ¬¡ï¼Œé‚£ä¹ˆä»å³æ¶‚ï¼Œä¸‹ä¸€æ¬¡æ¶‚è‰²è¦†ç›–å®ƒçš„ä¸€éƒ¨åˆ†ï¼Œä»…ç•™ä¸‹å³ç«¯ç‚¹ï¼Œå¦‚æœå‰©ä½™çš„é•¿åº¦$\geq$å½“å‰æ®µé•¿åº¦ï¼Œå°±èƒ½ä¿è¯æ¯ä¸ªé¢œè‰²å‡ºç°ä¸€æ¬¡ã€‚å¦‚æœæœ‰æ ¼å­æ²¡æ¶‚ï¼Œåªéœ€è¦å°†åæ¶‚çš„é¢œè‰²ä»å·¦æ¶‚å°±è¡Œï¼Œ$O(m)$ã€‚</p><figure class="highlight cpp"><figcaption><span>C.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> l[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, nn;</span><br><span class="line">    ll sum = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    nn = n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; l[i];</span><br><span class="line">        sum += l[i];</span><br><span class="line">        <span class="keyword">if</span> (l[i] &gt; n) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ans.emplace_back(n - l[i] + <span class="number">1</span>);</span><br><span class="line">        --n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (sum &lt; nn) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ans.back() != <span class="number">1</span>) &#123;</span><br><span class="line">        ans.back() = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = m - <span class="number">1</span>; i &gt; <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ans[i] + l[i] &lt; ans[i - <span class="number">1</span>])</span><br><span class="line">                ans[i - <span class="number">1</span>] = ans[i] + l[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i : ans) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1329B-Dreamoon-Likes-Sequences"><a href="#1329B-Dreamoon-Likes-Sequences" class="headerlink" title="1329B Dreamoon Likes Sequences"></a>1329B Dreamoon Likes Sequences</h2><p>æœ‰ä¸€ä¸ªä¸Šç•Œ$d$ï¼Œä¸€ä¸ªä»»æ„é•¿åº¦çš„åºåˆ—å¦‚æœ$a_i\leq d$ï¼Œä¸”$\oplus_{j=1}^{i-1} a_i&lt; \oplus_{j=1}^i a_i, i\in [1,n]$å³åˆæ³•ï¼Œæ±‚èƒ½æ„é€ çš„åˆæ³•åºåˆ—æ•°é‡ã€‚</p><p>å…³é”®åœ¨äºå¼‚æˆ–æ˜¯ä¸è¿›ä½çš„åŠ æ³•ï¼Œé‚£ä¹ˆæ–°åŠ å…¥çš„æ•°å¿…å®šè¦æ¯”å‰ä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶ç¬¬ä¸€ä¸ªæœ‰æ•ˆä½é å‰ï¼Œæ‰€æœ‰æŒ‰æ¯ä¸ªæ•°äºŒè¿›åˆ¶æœ€é«˜ä½åˆ†ç»„ç»Ÿè®¡ä¸ªæ•°$(cnt[i])$ï¼Œç„¶åè®¾&amp;dp[i]&amp;è¡¨ç¤ºåºåˆ—æœ€é•¿é•¿åº¦ä¸º$i$æ—¶çš„ç­”æ¡ˆï¼Œè½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><script type="math/tex; mode=display">dp[i] = (dp[i - 1] + 1) * cnt[i - 1]</script><p>å› ä¸ºå‰ä¸€ç»„çš„ç­”æ¡ˆéƒ½å¯ä»¥å†æ·»åŠ ä¸€ä¸ªå½“å‰ç»„çš„æ•°å­—ï¼Œä¹Ÿå¯ä»¥åªé€‰å½“å‰ç»„çš„æ•°å­—ï¼Œæ‰€ä»¥æ˜¯$dp[i - 1] + 1$ï¼Œ$O(32)$ã€‚</p><figure class="highlight lsl"><figcaption><span>D.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int q, m, n;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    while (q--) &#123;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        <span class="type">vector</span>&lt;int&gt; dp(<span class="number">35</span>), cnt(<span class="number">35</span>);</span><br><span class="line">        for (int i = <span class="number">0</span>, j = <span class="number">1</span>; i &lt; <span class="number">31</span>; ++i) &#123;</span><br><span class="line">            cnt[i] = (min(n, (j &lt;&lt; <span class="number">1</span>) - <span class="number">1</span>) + <span class="number">1</span> - j) % m;</span><br><span class="line">            if (cnt[i] &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                cnt[i] = <span class="number">0</span>;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">            j &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = <span class="number">1</span>; i &lt; <span class="number">32</span>; ++i)</span><br><span class="line">            dp[i] = (ll(dp[i - <span class="number">1</span>] + <span class="number">1</span>) * cnt[i - <span class="number">1</span>] + dp[i - <span class="number">1</span>]) % m;</span><br><span class="line">        cout &lt;&lt; dp[<span class="number">31</span>] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1329C-Drazil-Likes-Heap"><a href="#1329C-Drazil-Likes-Heap" class="headerlink" title="1329C Drazil Likes Heap"></a>1329C Drazil Likes Heap</h2><p>æœ‰ä¸€ä¸ªæ»¡äºŒå‰æ ‘å½¢å¼çš„é«˜$h$çš„å †ï¼Œç°åœ¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªä½ç½®ï¼Œå°†è¿™ä¸ªä½ç½®å€¼å˜æˆå¤§å„¿å­çš„å€¼ï¼Œç„¶åå†é€’å½’æ“ä½œè‡ªå·±çš„å¤§å„¿å­ï¼Œé—®å¦‚ä½•æ“ä½œè®©å †å˜æˆæ»¡äºŒå‰æ ‘ä¸”æ ‘é«˜ä¸º$g$çš„å½¢å¼ï¼Œä¸”æƒå€¼æœ€å°çš„æ–¹æ¡ˆã€‚<br>ï¼ˆä¸Šé¢è¯´çš„æ“ä½œç›¸å½“äºé€‰ä¸€ä¸ªç‚¹åˆ é™¤ï¼Œé€’å½’çš„æŠŠå¤§å„¿å­ç§»ä¸Šæ¥ï¼‰</p><p>å› ä¸ºå¤§é¡¶å †ï¼Œæ‰€ä»¥æ¯æ¬¡ä»ä¸Šå±‚æ“ä½œæ”¶ç›Šä¸€å®šæ˜¯æœ€å¤§çš„ã€‚è€Œå½“æˆ‘ä»¬é€‰å®šä¸€ä¸ªç‚¹åï¼Œå¦‚æœæ“ä½œï¼Œé‚£ä¹ˆå®ƒçš„è·¯å¾„æ˜¯å”¯ä¸€çš„ã€‚å› æ­¤æˆ‘ä»¬ä»æ ‘é¡¶å¼€å§‹æšä¸¾ï¼Œèƒ½åˆ å°±åˆ ã€‚åˆ¤æ–­æ˜¯å¦å¯ä»¥åˆ é™¤ï¼Œåªéœ€è¦çœ‹æœ€ç»ˆå½±å“çš„å¶å­èŠ‚ç‚¹çš„é«˜åº¦ï¼Œè¯¦ç»†å¯ä»¥çœ‹ä»£ç ã€‚$O(2^gh)$</p><figure class="highlight arduino"><figcaption><span>E.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> sz = (<span class="number">1</span> &lt;&lt; <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> h, g;</span><br><span class="line"><span class="keyword">int</span> a[sz &lt;&lt; <span class="number">1</span>], hit[sz &lt;&lt; <span class="number">1</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> l (u &lt;&lt; 1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> r l + 1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> uu = u;</span><br><span class="line">    hit[u] = hit[u &gt;&gt; <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (a[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[l] &gt; a[r]) u = l;</span><br><span class="line">        <span class="keyword">else</span> u = r;</span><br><span class="line">        hit[u] = hit[u &gt;&gt; <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    u &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (hit[u] &gt; g) &#123;</span><br><span class="line">        u = uu;</span><br><span class="line">        <span class="keyword">while</span> (a[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[l] &gt; a[r]) a[u] = a[l], u = l;</span><br><span class="line">            <span class="keyword">else</span> a[u] = a[r], u = r;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; h &gt;&gt; g;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; (<span class="number">1</span> &lt;&lt; h); ++i)</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span> &lt;&lt; h; i &lt; (<span class="number">2</span> &lt;&lt; h); ++i)</span><br><span class="line">            a[i] = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        ll sum = <span class="number">0</span>;</span><br><span class="line">        hit[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        ans.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; (<span class="number">1</span> &lt;&lt; g); ++i) &#123;</span><br><span class="line">            <span class="keyword">while</span> (check(i))</span><br><span class="line">                ans.emplace_back(i);</span><br><span class="line">            sum += a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; sum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : ans) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆä¸‹ä¸€é¢˜å¤ªéš¾äº†ï¼Œæ‰€ä»¥ç»“æŸäº†ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> é¢˜è§£ </category>
          
          <category> Codeforces </category>
          
          <category> div2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
            <tag> div2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Educational Codeforces Round 79 é¢˜è§£</title>
      <link href="/3592098837/"/>
      <url>/3592098837/</url>
      
        <content type="html"><![CDATA[<p>VPäº†ä¸€åœº<br><a id="more"></a></p><h2 id="1279A-New-Year-Garland"><a href="#1279A-New-Year-Garland" class="headerlink" title="1279A New Year Garland"></a>1279A New Year Garland</h2><p>æœ‰ä¸‰ç§ä¸œè¥¿ï¼Œåˆ†åˆ«$a,b,c$ä¸ªï¼Œé—®èƒ½ä¸èƒ½ç»„æˆç›¸åŒç‰©å“ä¸ç›¸é‚»çš„ä¸€åˆ—ã€‚</p><p>æŒ‘æœ€å¤§çš„æŠŠå…¶ä»–æ’åˆ°æœ€å¤§çš„é—´éš”é‡Œå°±è¡Œï¼Œ$O(1)$ã€‚</p><figure class="highlight cpp"><figcaption><span>A.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> a[<span class="number">3</span>];</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[<span class="number">0</span>] &gt;&gt; a[<span class="number">1</span>] &gt;&gt; a[<span class="number">2</span>];</span><br><span class="line">        sort(a, a + <span class="number">3</span>);</span><br><span class="line">        <span class="keyword">if</span> (a[<span class="number">0</span>] + a[<span class="number">1</span>] &lt; a[<span class="number">2</span>] - <span class="number">1</span>) <span class="built_in">puts</span>(<span class="string">"No"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"Yes"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1279B-Verse-For-Santa"><a href="#1279B-Verse-For-Santa" class="headerlink" title="1279B Verse For Santa"></a>1279B Verse For Santa</h2><p>æœ‰$n$ä¸ªç‰©å“ï¼Œå„è‡ªæœ‰é•¿åº¦ï¼Œä¾æ¬¡çš„æ”¾åœ¨é•¿$s$å†…ï¼Œç°åœ¨å¯ä»¥çœç•¥ä¸€ä¸ªï¼Œé—®æœ€å¤šæ”¾å‡ ä¸ªã€‚</p><p>è´ªå¿ƒæ¯”è¾ƒï¼Œå¦‚æœæœ‰å¿…è¦çœç•¥å¿…å®šçœå»æœ€é•¿çš„ï¼Œå¦åˆ™ä¸çœç•¥ï¼Œ$O(n)$ã€‚</p><figure class="highlight cpp"><figcaption><span>B.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">3e5</span> + <span class="number">5</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, k, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        ll sum = <span class="number">0</span>, la = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (la &lt; a[i]) &#123;</span><br><span class="line">                sum += la;</span><br><span class="line">                la = a[i];</span><br><span class="line">                <span class="keyword">if</span> (sum &gt; k) <span class="keyword">break</span>;</span><br><span class="line">                ans = i;</span><br><span class="line">            &#125; <span class="keyword">else</span> sum += a[i];</span><br><span class="line">            <span class="keyword">if</span> (sum &gt; k) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (k - sum &gt;= la) ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1279C-Stack-of-Presents"><a href="#1279C-Stack-of-Presents" class="headerlink" title="1279C Stack of Presents"></a>1279C Stack of Presents</h2><p>æœ‰ä¸€ä¸ªé•¿$n$çš„æ’åˆ—ï¼Œä»å³åˆ°å·¦å‹åˆ°æ ˆé‡Œï¼Œç°åœ¨è¦å–å‡º$m$ä¸ªæ•°ï¼Œå¦‚æœè¿™ä¸ªæ•°ä¸Šé¢æœ‰$k$ä¸ªæ•°ï¼Œéœ€è¦èŠ±$2k+1$ç§’ï¼Œä½†åœ¨æ”¾å›$k$ä¸ªæ•°æ—¶ï¼Œå¯ä»¥æŒ‰ä»»æ„é¡ºåºæ”¾å›ï¼Œé—®å–å‡º$m$ä¸ªæ•°çš„æœ€å°è€—æ—¶ã€‚</p><p>åœ¨å–å‡ºä¸€ä¸ªè¾ƒæ·±çš„æ•°çš„æ—¶å€™ï¼Œå‰é¢çš„æ•°æˆ‘ä»¬å¯ä»¥æŒ‰ç…§è¢«å–çš„é¡ºåºï¼Œå€’åºæ”¾å›ï¼Œè¿™æ ·å–å®ƒçš„æ—¶å€™å°±ä¼šåœ¨æ ˆé¡¶ã€‚é‚£ä¹ˆç»´æŠ¤ä¸€ä¸ªæœ€æ·±æ“ä½œçš„æ·±åº¦ï¼Œåœ¨æ“ä½œæ¯”è¿™ä¸ªä½ç½®æ·±å¾—æ•°çš„ä»£ä»·å°±æ˜¯$2k+1$ï¼Œå¦åˆ™ä»£ä»·æ˜¯$1$ï¼Œ$O(n+m)$</p><figure class="highlight arduino"><figcaption><span>C.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">3e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pos[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, m, la = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, t; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">            pos[t] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, t; i &lt;= m; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">            <span class="keyword">if</span> (pos[t] &lt; la) ++ans;</span><br><span class="line">            <span class="keyword">else</span> ans += <span class="number">2</span> * (pos[t] - i) + <span class="number">1</span>;</span><br><span class="line">            la = <span class="built_in">max</span>(la, pos[t]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1279D-Santaâ€™s-Bot"><a href="#1279D-Santaâ€™s-Bot" class="headerlink" title="1279D Santaâ€™s Bot"></a>1279D Santaâ€™s Bot</h2><p>åœ£è¯è€äººç”¨æœºå™¨äººå‘ç¤¼ç‰©ï¼Œæœ‰$n$ä¸ªå°å­©ï¼Œæ¯ä¸ªå°å­©æœ‰$k_i$ä¸ªæ„¿æœ›ã€‚ä½†æ˜¯æœºå™¨äººä¼šéšæœºçš„é€‰ä¸€ä¸ªå°å­©$x$ï¼Œå†éšæœºé€‰ä»–çš„ä¸€ä¸ªæ„¿æœ›$y$ï¼Œå†éšæœºå‘ç»™æŸä¸ªå°å­©$z$ï¼Œå‡å¦‚$y$ç¡®å®æ˜¯$z$çš„æ„¿æœ›ä¹‹ä¸€ï¼Œé‚£ä¹ˆè¿™æ ·çš„ä¸€ä¸ªä¸‰å…ƒç»„$(x,y,z)$å°±æ˜¯æ­£ç¡®çš„ï¼Œé—®æœºå™¨äººé€‰å‡ºæ­£ç¡®ä¸‰å…ƒç»„çš„æ¦‚ç‡ã€‚</p><p>å› ä¸ºæ„¿æœ›æœ€å¤šä¸è¶…è¿‡$10^6$ï¼Œæ‰€æœ‰æˆ‘ä»¬æšä¸¾æ„¿æœ›ã€‚é€‰ä¸­ä¸€ä¸ªå­©å­çš„æ¦‚ç‡æ˜¯$\frac 1n$ï¼Œé€‰ä»–çš„ä¸€ä¸ªæ„¿æœ›è¢«é€‰ä¸­çš„æ¦‚ç‡æ˜¯$\frac 1{k_i}$ï¼Œç»Ÿè®¡æƒ³è¦è¿™ä¸ªç¤¼ç‰©çš„å­©å­ä¸ªæ•°$cnt[j]$ï¼Œé‚£ä¹ˆå‘é€æ­£ç¡®çš„æ¦‚ç‡æ˜¯$\frac {cnt[j]}n$ï¼Œå› ä¸ºæ¯ä¸ªæƒ…å†µç‹¬ç«‹ï¼Œå¯ä»¥ç›¸åŠ ï¼Œ$O(\sum k_i)$ã€‚</p><figure class="highlight excel"><figcaption><span>D.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const <span class="built_in">int</span> <span class="built_in">mod</span> = <span class="number">998244353</span>;</span><br><span class="line">const <span class="built_in">int</span> <span class="built_in">N</span> = <span class="number">1</span>e6 + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="built_in">int</span>&gt; gift[<span class="built_in">N</span>];</span><br><span class="line">ll cnt[<span class="built_in">N</span>], inv[<span class="built_in">N</span>];</span><br><span class="line"></span><br><span class="line">void init() &#123;</span><br><span class="line">    inv[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    for (<span class="built_in">int</span> i = <span class="number">2</span>; i &lt;= <span class="number">1</span>e6; ++i) &#123;</span><br><span class="line">        inv[i] = (<span class="built_in">mod</span> - <span class="built_in">mod</span> / i) * inv[<span class="built_in">mod</span> % i] % <span class="built_in">mod</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> main() &#123;</span><br><span class="line">    init();</span><br><span class="line">    <span class="built_in">int</span> <span class="built_in">n</span>;</span><br><span class="line">    cin &gt;&gt; <span class="built_in">n</span>;</span><br><span class="line">    for (<span class="built_in">int</span> i = <span class="number">0</span>, <span class="built_in">t</span>; i &lt; <span class="built_in">n</span>; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; <span class="built_in">t</span>;</span><br><span class="line">        gift[i].resize(<span class="built_in">t</span>);</span><br><span class="line">        for (<span class="built_in">int</span> &amp;j <span class="symbol">:</span> gift[i]) &#123;</span><br><span class="line">            cin &gt;&gt; j;</span><br><span class="line">            ++cnt[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    for (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">n</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">        for (<span class="built_in">int</span> j <span class="symbol">:</span> gift[i]) tmp += cnt[j];</span><br><span class="line">        ans = (ans + inv[gift[i].size()] * tmp % <span class="built_in">mod</span>) % <span class="built_in">mod</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ans = ans * inv[<span class="built_in">n</span>] % <span class="built_in">mod</span> * inv[<span class="built_in">n</span>] % <span class="built_in">mod</span>;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1279E-New-Year-Permutations"><a href="#1279E-New-Year-Permutations" class="headerlink" title="1279E New Year Permutations"></a>1279E New Year Permutations</h2><p>é¢˜æ„æ¯”è¾ƒéš¾æè¿°ï¼Œå»ºè®®çœ‹<a href="https://codeforces.com/contest/1279/problem/E" target="_blank" rel="noopener">åŸæ–‡</a>/ç¿»è¯‘</p><p>é¦–å…ˆè€ƒè™‘ä¸€ä¸ªé•¿$n$çš„å¤§ç¯æœ‰å¤šå°‘æ’åˆ—ï¼Œå› ä¸º$n$ä¸€å®šæ˜¯å¼€å¤´ï¼Œ$1$ä¸€å®šæ˜¯$n$çš„å‰é©±ï¼Œä¹‹åå‰©ä¸‹çš„$n-2$ä¸ªç‚¹å¯ä»¥ä»»æ„æ’ï¼Œå³$(n-2)!$ã€‚ç°åœ¨è®¾$dp[i]$è¡¨ç¤ºé•¿ä¸º$i$çš„ä¸²æœ‰å¤šå°‘ç§åˆæ³•æ’åˆ—ï¼Œè½¬ç§»æ–¹ç¨‹å³ï¼š</p><script type="math/tex; mode=display">dp[i] = \sum_{j=0}^{i-1}dp[j](i-j-2)!</script><p>ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»å­—å…¸åºç”±å°åˆ°å¤§æšä¸¾ï¼Œå¾—åˆ°ç¬¬$k$å¤§çš„æ’åˆ—ç”±å“ªäº›é•¿åº¦å°åºåˆ—ç»„æˆã€‚æ ¹æ®è¿™ä¸€æ­¥å¾—åˆ°çš„ç»“æœï¼Œé—®é¢˜è¢«åˆ†è§£æˆäº†é•¿ä¸º$l$çš„ç¯ï¼Œ$l$ä½ç½®å›ºå®šï¼Œ$1$å›ºå®šæ˜¯$l$å‰é©±ï¼Œå­—å…¸åºçš„ç¬¬$x$ä¸ªç¯æ˜¯å“ªä¸ªï¼ˆåœ¨æŒ‰ä½æšä¸¾å­—å…¸åºçš„æ—¶å€™å…¶å®å°±æ˜¯ç©ºé—²ä½çš„é˜¶ä¹˜ï¼Œæšä¸¾çš„è¿‡ç¨‹ä¸­è¦ä¿è¯ä¸èƒ½å½¢æˆå°ç¯ï¼Œå³é•¿åº¦å¿…é¡»æ˜¯ä¸Šä¸€æ­¥ç®—å‡ºçš„ç»“æœï¼‰,é‚£ä¹ˆæ‹¼èµ·æ¥å°±å¯ä»¥å¾—åˆ°æœ€ç»ˆç­”æ¡ˆï¼Œ$O(n^2)$</p><figure class="highlight cpp"><figcaption><span>E.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans[<span class="number">55</span>], fa[<span class="number">55</span>], vis[<span class="number">55</span>];</span><br><span class="line">ll dp[<span class="number">55</span>], fac[<span class="number">55</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    x -= <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> fac[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fac[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">20</span>; ++i)</span><br><span class="line">        fac[i] = fac[i - <span class="number">1</span>] * i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">20</span>; i &lt;= <span class="number">50</span>; ++i)</span><br><span class="line">        fac[i] = <span class="number">1e18</span>;</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">22</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; ++j)</span><br><span class="line">            dp[i] += dp[j] * calc(i - j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">22</span>; i &lt;= <span class="number">50</span>; ++i) &#123;</span><br><span class="line">        dp[i] = <span class="number">1e18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fi</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x != fa[x])</span><br><span class="line">        <span class="keyword">return</span> fa[x] = fi(fa[x]);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">permute</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, ll rk)</span> </span>&#123;</span><br><span class="line">    ans[l] = r;</span><br><span class="line">    vis[r] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> x = r - l - <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l + <span class="number">1</span>; i &lt;= r; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = l; j &lt;= r; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == r &amp;&amp; !vis[j]) &#123;</span><br><span class="line">                ans[i] = j;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (vis[j] || fi(i) == fi(j)) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (x &lt; <span class="number">0</span>) x = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (fac[x] &gt;= rk) &#123;</span><br><span class="line">                --x;</span><br><span class="line">                ans[i] = vis[j] = j;</span><br><span class="line">                fa[fi(j)] = fi(i);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                rk -= fac[x];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        ll k;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">        <span class="keyword">if</span> (k &gt; dp[n]) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            vis[i] = <span class="number">0</span>;</span><br><span class="line">            fa[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>, r; l &lt;= n; l = r + <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (r = l; r &lt;= n; ++r) &#123;</span><br><span class="line">                ll term = calc(r - l + <span class="number">1</span>) * dp[n - r];</span><br><span class="line">                <span class="keyword">if</span> (term &gt;= k)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                k -= term;</span><br><span class="line">            &#125;</span><br><span class="line">            ll rk = (k - <span class="number">1</span>) / dp[n - r] + <span class="number">1</span>;</span><br><span class="line">            k = (k - <span class="number">1</span>) % dp[n - r] + <span class="number">1</span>;</span><br><span class="line">            permute(l, r, rk);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; ans[i] &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1279F-New-Year-and-Handle-Change"><a href="#1279F-New-Year-and-Handle-Change" class="headerlink" title="1279F New Year and Handle Change"></a>1279F New Year and Handle Change</h2><p>æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå«æœ‰å¤§å°å†™å­—æ¯ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥æŠŠé•¿ä¸º$l$çš„ä¸€æ®µå­—æ¯å…¨å˜æˆå¤§å†™æˆ–å°å†™ï¼Œé—®æœ€åèƒ½å¾—åˆ°çš„$min$ï¼ˆå¤§å†™å­—æ¯ï¼Œå°å†™å­—æ¯ï¼‰çš„å€¼ã€‚</p><p>æŒ‚ä¸ªé“¾ï¼Œæœ‰ç¼˜å›æ¥çœ‹ã€‚<a href="https://twifor.github.io/2020/01/29/Educational-Codeforces-Round-79/" target="_blank" rel="noopener">é¢˜è§£</a></p>]]></content>
      
      
      <categories>
          
          <category> é¢˜è§£ </category>
          
          <category> Codeforces </category>
          
          <category> edu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codeforces </tag>
            
            <tag> edu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round 630 Div.2 é¢˜è§£</title>
      <link href="/1747842812/"/>
      <url>/1747842812/</url>
      
        <content type="html"><![CDATA[<p>å¿˜è®°æ¯”èµ›æ—¶é—´äº†â€¦<br><a id="more"></a></p><h2 id="1332A-Exercising-Walk"><a href="#1332A-Exercising-Walk" class="headerlink" title="1332A Exercising Walk"></a>1332A Exercising Walk</h2><p>æœ‰ä¸€ä¸ªæœºå™¨äººå¼€å§‹ä½äº$(x,y)$ï¼Œç°åœ¨è¦æ±‚ä¸Šä¸‹å·¦å³åˆ†åˆ«èµ°$a,b,c,d$æ­¥ï¼Œè¦æ±‚è·¯å¾„åœ¨$(x1,y1),(x2,y2)$ä¸ºå¯¹è§’çš„çŸ©å½¢èŒƒå›´å†…ï¼Œé—®æ˜¯å¦å¯è¡Œã€‚</p><p>æ¨ªç«–å¯ä»¥åˆ†åˆ«è€ƒè™‘ï¼Œå¦‚æœæœ€ç»ˆç‚¹åœ¨é™åˆ¶èŒƒå›´å†…ï¼Œä¸€å®šå¯ä»¥æœ‰æ»¡è¶³æ¡ä»¶çš„è·¯ï¼Œä½†å½“ç»™çš„çŸ©å½¢é•¿æˆ–å®½ä¸º$1$çš„æ—¶å€™è¦ç‰¹åˆ¤ï¼Œ$O(1)$ã€‚</p><figure class="highlight cpp"><figcaption><span>A.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> a, b, c, d, x, y, x1, y1, x2, y2, f = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d</span><br><span class="line">            &gt;&gt; x &gt;&gt; y &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;</span><br><span class="line">        <span class="keyword">if</span> ((x1 == x2) &amp;&amp; (a || b))</span><br><span class="line">            f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> ((y1 == y2) &amp;&amp; (c || d))</span><br><span class="line">            f = <span class="number">1</span>;</span><br><span class="line">        b -= a, d -= c;</span><br><span class="line">        <span class="keyword">if</span> (b + x &lt; x1 || b + x &gt; x2)</span><br><span class="line">            f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (d + y &lt; y1 || d + y &gt; y2)</span><br><span class="line">            f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (f)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"No"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"Yes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1332B-Composite-Coloring"><a href="#1332B-Composite-Coloring" class="headerlink" title="1332B Composite Coloring"></a>1332B Composite Coloring</h2><p>æœ‰$n$ä¸ª$\le 1000$çš„æ•°ï¼Œè¦æ±‚æ¶‚è‰²ç›¸åŒçš„æ•°å­—ä¸äº’è´¨ï¼Œæœ€å¤š$11$ç§é¢œè‰²ï¼Œé—®ä¸€ç§åˆæ³•çš„æ¶‚è‰²æ–¹æ¡ˆã€‚</p><p>è¯»åè¦æ±‚äº†ï¼Œåˆšäº†å¥½ä¸€ä¼šã€‚ã€‚åªè¦æŒ‰æœ€å°è´¨å› å­æ¶‚è‰²å°±è¡Œï¼Œå› ä¸ºç¬¬$11$ä¸ªå› å­æ˜¯$31$ï¼Œé‚£ä¹ˆæ¯”å®ƒå¤§çš„åˆæ•°ä¸€å®šåœ¨è¿™$11$ä¸ªè´¨æ•°å†…æœ‰è´¨å› å­ï¼Œ$O(n^2)$ã€‚</p><figure class="highlight properties"><figcaption><span>B.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="attr">using</span> <span class="string">namespace std;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">int</span> <span class="string">main() &#123;</span></span><br><span class="line">    <span class="attr">int</span> <span class="string">q;</span></span><br><span class="line">    <span class="attr">cin</span> <span class="string">&gt;&gt; q;</span></span><br><span class="line">    <span class="attr">while</span> <span class="string">(q--) &#123;</span></span><br><span class="line">        <span class="attr">int</span> <span class="string">n, t;</span></span><br><span class="line">        <span class="attr">cin</span> <span class="string">&gt;&gt; n;</span></span><br><span class="line">        <span class="meta">vector&lt;int&gt;</span> <span class="string">ans(n), tmp[1001];</span></span><br><span class="line">        <span class="attr">for</span> <span class="string">(int i = 0; i &lt; n; ++i) &#123;</span></span><br><span class="line">            <span class="attr">cin</span> <span class="string">&gt;&gt; t;</span></span><br><span class="line">            <span class="attr">for</span> <span class="string">(int j = 2; j &lt; 1001; ++j) &#123;</span></span><br><span class="line">                <span class="attr">if</span> <span class="string">(t % j == 0) &#123;</span></span><br><span class="line">                    <span class="attr">tmp[j].emplace_back(i);</span></span><br><span class="line">                    <span class="attr">break;</span></span><br><span class="line">                <span class="attr">&#125;</span></span><br><span class="line">            <span class="attr">&#125;</span></span><br><span class="line">        <span class="attr">&#125;</span></span><br><span class="line">        <span class="attr">int</span> <span class="string">cnt = 0;</span></span><br><span class="line">        <span class="attr">for</span> <span class="string">(auto &amp;i : tmp) &#123;</span></span><br><span class="line">            <span class="attr">if</span> <span class="string">(!i.empty()) ++cnt;</span></span><br><span class="line">            <span class="attr">for</span> <span class="string">(int j : i) ans[j] = cnt;</span></span><br><span class="line">        <span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">cout</span> <span class="string">&lt;&lt; cnt &lt;&lt; endl;</span></span><br><span class="line">        <span class="attr">for</span> <span class="string">(int i = 0; i &lt; n; ++i) &#123;</span></span><br><span class="line">            <span class="attr">cout</span> <span class="string">&lt;&lt; ans[i] &lt;&lt; ' ';</span></span><br><span class="line">        <span class="attr">&#125;</span></span><br><span class="line">        <span class="attr">cout</span> <span class="string">&lt;&lt; endl;</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line">    <span class="attr">return</span> <span class="string">0;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="1332C-K-Complete-Word"><a href="#1332C-K-Complete-Word" class="headerlink" title="1332C K-Complete Word"></a>1332C K-Complete Word</h2><p>ä¸€ä¸ªå­—ç¬¦ä¸²$S$ï¼Œè¦æ±‚$T$æ˜¯å›æ–‡çš„ï¼Œä¸”$k$æ˜¯å®ƒçš„å‘¨æœŸï¼Œä¸€æ¬¡æ“ä½œå¯ä»¥æ¢ä¸€ä¸ªå­—ç¬¦ï¼Œé—®æœ€å°‘æ“ä½œæ¬¡æ•°è®©$S$æ»¡è¶³è¦æ±‚ã€‚</p><p>å› ä¸º$S$å¯¹åº”çš„åˆæ³•ä¸²æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆæŒ‰é¢˜æ„å–æŸäº›å¯¹åº”ä½ç½®æš´åŠ›å°±è¡Œäº†ï¼Œæ¯ä¸ªä½ç½®åªè®¿é—®ä¸€æ¬¡ï¼Œ$O(n)$ã€‚</p><figure class="highlight arduino"><figcaption><span>C.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, k;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k &gt;&gt; s;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">            <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">cnt</span><span class="params">(<span class="number">26</span>)</span></span>;</span><br><span class="line">            <span class="keyword">int</span> tmp = <span class="number">0</span>, num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j += k) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!v[j]) &#123;</span><br><span class="line">                    v[j] = <span class="number">1</span>;</span><br><span class="line">                    ++cnt[s[j] - <span class="string">'a'</span>];</span><br><span class="line">                    ++num;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!v[n - j - <span class="number">1</span>]) &#123;</span><br><span class="line">                    v[n - j - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                    ++cnt[s[n - j - <span class="number">1</span>] - <span class="string">'a'</span>];</span><br><span class="line">                    ++num;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; ++j) &#123;</span><br><span class="line">                tmp = <span class="built_in">max</span>(tmp, cnt[j]);</span><br><span class="line">            &#125;</span><br><span class="line">            tmp = num - tmp;</span><br><span class="line">            ans += tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1332D-Walk-on-Matrix"><a href="#1332D-Walk-on-Matrix" class="headerlink" title="1332D Walk on Matrix"></a>1332D Walk on Matrix</h2><p>ç°åœ¨æœ‰ä¸€ä¸ªå‡$DP$ç®—æ³•ï¼Œæ±‚ä¸€ä¸ªçŸ©é˜µä»å·¦ä¸Šåˆ°å³ä¸‹è§’è·¯å¾„å„åº—æƒå€¼$\&amp;$èµ·æ¥çš„æœ€å¤§æƒå€¼ï¼Œè¦æ±‚æ„é€ ä¸€ä¸ªçŸ©é˜µ$(n\leq 500)$ï¼Œæ˜¯çœŸå®å€¼å’Œç®—æ³•å¾—åˆ°çš„ç»“æœç›¸å·®$k$ã€‚</p><p>å‡çš„åŸå› æ˜¯è´ªå¿ƒå¯¹$\&amp;$ä¸æˆç«‹ã€‚å…¶å®åªè¦æ„é€ ä¸¤æ¡è·¯çš„çŸ©é˜µï¼Œä¸€æ¡çš„å€¼ç¨å¤§ï¼Œå¦ä¸€æ¡ç¨å°ï¼Œä½†åˆ°ç»ˆç‚¹çš„æ—¶å€™å¤§å€¼æ²¡åŠæ³•å–å°±å¥½ï¼Œ$O(1)$ã€‚<br>ï¼ˆå¬è¯´äº†å¾ˆå¤šä¹±æçš„åšæ³•ï¼Œä½†å…¶å®æ ·ä¾‹2æé†’æŒºæ˜æ˜¾çš„ã€‚ã€‚ã€‚ï¼‰</p><figure class="highlight cpp"><figcaption><span>D.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"3 3"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> c = <span class="number">1</span> &lt;&lt; (<span class="number">32</span> - __builtin_clz(k));</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (c + k) &lt;&lt; <span class="string">' '</span> &lt;&lt; k &lt;&lt; <span class="string">" 0"</span> &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">         &lt;&lt; c &lt;&lt; <span class="string">' '</span> &lt;&lt; k &lt;&lt; <span class="string">" 0"</span> &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">         &lt;&lt; c &lt;&lt; <span class="string">' '</span> &lt;&lt; (c + k) &lt;&lt; <span class="string">' '</span> &lt;&lt; k &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1332E-Height-All-the-Same"><a href="#1332E-Height-All-the-Same" class="headerlink" title="1332E Height All the Same"></a>1332E Height All the Same</h2><p>ä¸€ä¸ªå¤§å°ä¸º$n\times m$çš„çŸ©é˜µï¼Œåˆå§‹å€¼ä¸º${ij}$ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥æŠŠä¸€ä¸ªä½ç½®å¢åŠ $2$ï¼Œæˆ–æŠŠç›¸é‚»çš„ä¸¤ä¸ªä½ç½®å„å¢åŠ $1$ï¼Œè¦æ±‚$L \leq a_{ij} \leq R$ï¼Œé—®è¿™æ ·çš„çŸ©é˜µæœ‰å‡ ä¸ªã€‚</p><p>å…¶å®å¾ˆå®¹æ˜“æƒ³åˆ°å¥‡å¶æ€§çš„é—®é¢˜ï¼Œæ“ä½œäºŒå¯ä»¥æŠŠç›¸é‚»çš„ä¸¤ä¸ªæ•°å¥‡å¶æ€§å–åï¼Œç¬¬ä¸€ä¸ªæ“ä½œå¯ä»¥æŠŠå¥‡å¶æ€§ç›¸åŒçš„æ•°è¡¥æˆç›¸åŒå€¼ã€‚é‚£ä¹ˆå¦‚æœåŸå§‹çŸ©é˜µé‡Œå¥‡æ•°çš„ä¸ªæ•°æˆ–å¶æ•°çš„ä¸ªæ•°ä¸ºå¶æ•°ï¼Œå°±ä¸€å®šå¯ä»¥æŠŠæ‰€æœ‰æ•°å¥‡å¶æ€§è½¬åŒ–ç›¸åŒã€‚<br>é—®é¢˜å°±å˜æˆäº†$n\times m$å„æ•°å­—æœ‰å‡ ç§æ”¾æ³•ï¼Œæˆ‘ä»¬æŠŠæ€»æ•°åˆ†å¥‡å¶è€ƒè™‘ï¼š</p><ul><li>å¦‚æœ$n\times m$æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆæ‰€æœ‰æ•°å­—å¯ä»¥éšä¾¿æ”¾ï¼Œç­”æ¡ˆå°±æ˜¯$(R-L+1)^{n\times m}$</li><li>å¦‚æœ$n\times m$æ˜¯å¶æ•°ï¼Œè®¾$odd$ä¸º$a_{ij}$ä¸ºå¥‡æ•°ä¸ªæ•°ï¼Œ$even$ä¸ºå¶æ•°ä¸ªæ•°ï¼Œé‚£ä¹ˆ$odd$å’Œ$even$éƒ½éœ€è¦å–å¶æ•°ï¼Œè®¾$x$ä¸º$[L,R]$ä¸­çš„å¥‡æ•°ä¸ªæ•°ï¼Œ$y$ä¸º$[L,R]$ä¸­çš„å¶æ•°ä¸ªæ•°ï¼Œç­”æ¡ˆå°±æ˜¯$\sum_{odd=2k}^{n\times m}C_{odd}^{n\times m - odd}x^{odd}y^{even}$ã€‚å¯ä»¥å‘ç°è¿™å…¶å®å°±æ˜¯äºŒé¡¹å¼ä¸­çš„å¶æ•°é¡¹çš„å’Œï¼Œå› æ­¤åŒ–ç®€ä¸ºï¼š<script type="math/tex; mode=display">\frac {(x + y)^{n\times m} - (x - y)^{n\times m}}{2}</script>$O(\log nm)$</li></ul><figure class="highlight nginx"><figcaption><span>E.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="attribute">using</span> namespace std;</span><br><span class="line"></span><br><span class="line"><span class="attribute">ll</span> qpow(ll a, ll b) &#123;</span><br><span class="line">    <span class="attribute">ll</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">while</span> (b) &#123;</span><br><span class="line">        <span class="attribute">if</span> (b &amp; <span class="number">1</span>) res = res * a % mod;</span><br><span class="line">        <span class="attribute">a</span> = a * a % mod; <span class="attribute">b</span> &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">int</span> main() &#123;</span><br><span class="line">    <span class="attribute">ll</span> l, r, n, m;</span><br><span class="line">    <span class="attribute">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    <span class="attribute">n</span> *= m;</span><br><span class="line">    <span class="attribute">if</span> (n &amp; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="attribute">cout</span> &lt;&lt; qpow(r - l + <span class="number">1</span>, n) &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="section">else</span> &#123;</span><br><span class="line">        <span class="attribute">ll</span> odd = (r + <span class="number">1</span>) / <span class="number">2</span> - l / <span class="number">2</span>;</span><br><span class="line">        <span class="attribute">ll</span> even = r / <span class="number">2</span> - (l - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="attribute">cout</span> &lt;&lt; ((qpow(even + odd, n) + qpow(even - odd, n)) * (mod + <span class="number">1</span>) / <span class="number">2</span>) % mod &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1332F-Independent-Set"><a href="#1332F-Independent-Set" class="headerlink" title="1332F Independent Set"></a>1332F Independent Set</h2><p>æœ‰ä¸€é¢—æ— æ ¹æ ‘ï¼Œç°åœ¨æ±‚å‡ºå„ä¸ªè¾¹å¯¼å‡ºå­å›¾å„ç‹¬ç«‹é›†ä¸ªæ•°çš„å’Œã€‚</p><p>é¦–å…ˆä¸€é¢—æ ‘çš„ç‹¬ç«‹é›†ä¸ªæ•°å¯ä»¥æ ‘$dp$å¾—åˆ°ï¼Œæ­¤é¢˜è¦æ±‚æ‰€æœ‰çš„è¾¹å¯¼å‡ºå­å›¾æ±‚å’Œï¼Œå®é™…ä¸Šç›¸å½“äºåˆ æ‰äº†ä¸€äº›è¾¹ï¼Œå…¶ä¸­å¦‚æœæœ‰å­¤ç«‹ç‚¹çš„è¯ä¸èƒ½é€‰ä¸­è¿™ä¸ªç‚¹ã€‚åšæ³•æ˜¯ç»´æŠ¤$3$ä¸ªå€¼ï¼Œ$dp[u][0]$è¡¨ç¤ºç‚¹$u$ä¸è¢«é€‰ä¸­æ—¶çš„ç­”æ¡ˆï¼Œ$dp[u][1]$è¡¨ç¤ºç‚¹$u$ä¸è¢«é€‰ä¸­æ—¶çš„ç­”æ¡ˆï¼Œ$dp[u][2]$è¡¨ç¤ºç‚¹$u$å’Œå­ç»“ç‚¹ä¸€æ¡è¾¹éƒ½ä¸è¿æ—¶çš„ç­”æ¡ˆã€‚åœ¨$DFS$ä¸­ç”¨$num0$è¡¨ç¤ºä»¥$u$çš„å­ç»“ç‚¹$v$ä¸ºæ ¹çš„å­æ ‘çš„å…¨éƒ¨ç­”æ¡ˆï¼Œç”¨$num1$è¡¨ç¤ºå­æ ‘çš„å…¨éƒ¨ç­”æ¡ˆå»æ‰$v$å­¤ç«‹çš„ç­”æ¡ˆï¼Œé‚£ä¹ˆè½¬ç§»ï¼š</p><ul><li>$dp[u][0]=\prod (num0+num1)$ï¼Œå³å½“$u$é€‰ä¸­æ—¶ï¼Œå­ç»“ç‚¹çŠ¶æ€ä»»æ„:<ul><li>å½“$u$ä¸é€‰æ—¶ï¼Œé€‰$e(u,v)$è¿™æ¡è¾¹ï¼Œé‚£ä¹ˆæœ‰$num1$çš„è´¡çŒ®ã€‚</li><li>å½“$u$ä¸é€‰æ—¶ï¼Œä¸é€‰$e(u,v)$è¿™æ¡è¾¹ï¼Œé‚£ä¹ˆæœ‰$num0$çš„è´¡çŒ®ï¼ˆå› ä¸ºä¸èƒ½è®©$v$å­¤ç«‹ä¸”è¢«é€‰ï¼‰ã€‚</li></ul></li><li>$dp[u][1]=\prod (num0+dp[v][0])$ï¼Œå½“$u$é€‰ä¸­æ—¶ï¼Œå­ç»“ç‚¹ä¸èƒ½è¢«é€‰ï¼›<ul><li>å½“$u$é€‰ä¸­æ—¶ï¼Œé€‰$e(u,v)$è¿™æ¡è¾¹ï¼Œé‚£ä¹ˆæœ‰$dp[v][0]$çš„è´¡çŒ®ï¼ˆå› ä¸ºç›¸é‚»ç»“ç‚¹ä¸èƒ½å†è¢«é€‰ä¸­ï¼‰ã€‚</li><li>å½“$u$é€‰ä¸­æ—¶ï¼Œä¸é€‰$e(u,v)$è¿™æ¡è¾¹ï¼Œé‚£ä¹ˆæœ‰$num0$çš„è´¡çŒ®ï¼ˆåŒä¸Š$2$ï¼‰ã€‚</li></ul></li><li>$dp[u][2]=\prod num0$ï¼Œ<ul><li>å½“$u$å­¤ç«‹æ—¶ï¼Œé‚£ä¹ˆæœ‰$num0$çš„è´¡çŒ®ï¼ˆåŒä¸Š$2$ï¼‰ã€‚</li></ul></li></ul><figure class="highlight prolog"><figcaption><span>F.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const int <span class="symbol">N</span> = <span class="number">3e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">ll dp[<span class="symbol">N</span>][<span class="number">3</span>];</span><br><span class="line">vector&lt;int&gt; g[<span class="symbol">N</span>];</span><br><span class="line"></span><br><span class="line">void dfs(int u, int fa = <span class="number">0</span>) &#123;</span><br><span class="line">    dp[u][<span class="number">0</span>] = dp[u][<span class="number">1</span>] = dp[u][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">    for (int v : g[u]) &#123;</span><br><span class="line">        if (v == fa) continue;</span><br><span class="line">        dfs(v, u);</span><br><span class="line">        ll num1 = dp[v][<span class="number">0</span>] + dp[v][<span class="number">1</span>] - dp[v][<span class="number">2</span>];</span><br><span class="line">        ll num0 = dp[v][<span class="number">0</span>] + dp[v][<span class="number">1</span>];</span><br><span class="line">        dp[u][<span class="number">0</span>] = dp[u][<span class="number">0</span>] * (num1 + num0) <span class="comment">% mod;</span></span><br><span class="line">        dp[u][<span class="number">2</span>] = dp[u][<span class="number">2</span>] * (num1) <span class="comment">% mod;</span></span><br><span class="line">        dp[u][<span class="number">1</span>] = dp[u][<span class="number">1</span>] * (num1 + dp[v][<span class="number">0</span>]) <span class="comment">% mod;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    for (int i = <span class="number">1</span>, u, v; i &lt; n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        g[u].emplace_back(v);</span><br><span class="line">        g[v].emplace_back(u);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; (dp[<span class="number">1</span>][<span class="number">0</span>] + dp[<span class="number">1</span>][<span class="number">1</span>] - dp[<span class="number">1</span>][<span class="number">2</span>] - <span class="number">1</span> + <span class="number">2</span> * mod) <span class="comment">% mod &lt;&lt; endl;</span></span><br><span class="line">    return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¢˜è§£ </category>
          
          <category> Codeforces </category>
          
          <category> div2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
            <tag> div2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round 612 Div.2 é¢˜è§£</title>
      <link href="/1925655048/"/>
      <url>/1925655048/</url>
      
        <content type="html"><![CDATA[<p>è¡¥ä¹ ä¸€åœºæœŸæœ«æ—¶å€™æ²¡æ‰“çš„DIv.2<br><a id="more"></a></p><h2 id="1287A-Angry-Students"><a href="#1287A-Angry-Students" class="headerlink" title="1287A Angry Students"></a>1287A Angry Students</h2><p>æœ‰ä¸€ä¸ªé•¿$n$å­—ç¬¦ä¸²ï¼Œç”±$A$å’Œ$P$æ„æˆã€‚æ¯ç§’ä¸€ä¸ª$A$å¯ä»¥å°†ç´§éšå…¶åçš„ä¸€ä¸ª$P$å˜æˆ$A$ï¼Œé—®æœ€åä¸€ä¸ªä»$P$å˜æˆ$A$çš„æ—¶é—´ã€‚</p><p>å‡ºå…ˆè¿‡$A$ä¹‹åæœ€é•¿çš„è¿ç»­$P$çš„é•¿åº¦ï¼Œ$O(n\log n)$ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//A.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> k;</span><br><span class="line">        <span class="built_in">string</span> s;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; k &gt;&gt; s;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, la = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] == <span class="string">'A'</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (la != <span class="number">-1</span>)</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, i - la - <span class="number">1</span>);</span><br><span class="line">                la = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (la != <span class="number">-1</span>)</span><br><span class="line">            ans = <span class="built_in">max</span>(ans, <span class="keyword">int</span>(s.length()) - la - <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1287B-Hyperset"><a href="#1287B-Hyperset" class="headerlink" title="1287B Hyperset"></a>1287B Hyperset</h2><p>æœ‰$n$ä¸ªé•¿ä¸º$k$å­—ç¬¦ä¸²ï¼Œç”±$S$ã€$E$å’Œ$T$æ„æˆï¼Œæ±‚å¯¹åº”ä½ç½®å­—ç¬¦ç›¸åŒæˆ–è¿™ä¸ªä½ç½®ä¸¤ä¸¤ä¸åŒçš„ä¸‰å…ƒç»„çš„æ•°ç›®ã€‚</p><p>æšä¸¾å‰ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œæš´åŠ›å¾—åˆ°ç›®æ ‡ä¸²ï¼Œ$O(kn^2\log n)$ã€‚</p><figure class="highlight cpp"><figcaption><span>B.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, k;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">s</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s[i];</span><br><span class="line">        ++mp[s[i]];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> calc = [k](<span class="built_in">string</span> &amp;a, <span class="built_in">string</span> &amp;b) &#123;</span><br><span class="line">        <span class="built_in">string</span> tmp = a;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] == b[i]) tmp[i] = a[i];</span><br><span class="line">            <span class="keyword">else</span> tmp[i] = (<span class="string">'S'</span> + <span class="string">'E'</span> + <span class="string">'T'</span> - a[i] - b[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            ans += mp[calc(s[i], s[j])];</span><br><span class="line">            <span class="keyword">if</span> (s[i] == s[j]) ans -= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans / <span class="number">3</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1286A-Garland"><a href="#1286A-Garland" class="headerlink" title="1286A Garland"></a>1286A Garland</h2><p>æœ‰é•¿ä¸º$n$çš„æ’åˆ—ï¼Œä¸€äº›ä½ç½®çš„æ•°å­—è¢«å»æ‰äº†ï¼Œç°åœ¨å¡«ä¸Šæ•°å­—ï¼Œè¦æ±‚æœ€å°åŒ–ç›¸é‚»æ•°å­—å¥‡å¶æ€§ä¸åŒçš„å¯¹æ•°ã€‚</p><p>å®˜æ–¹é¢˜è§£è´ªå¿ƒï¼Œä¸è¿‡DPä¹Ÿå¾ˆæ˜æ˜¾ã€‚<br>è®¾$dp[i][x][y][0/1]$ï¼Œè¡¨ç¤ºå¤„ç†åˆ°ç¬¬$i$ä½ï¼Œå¥‡æ•°å‰©xä¸ªï¼Œå¶æ•°å‰©yä¸ªï¼Œæœ€åä¸€ä¸ªæ•°çš„å¥‡å¶æ€§ï¼Œè½¬ç§»ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œ$O(50^2n)$;</p><figure class="highlight prolog"><figcaption><span>C.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int dp[<span class="number">105</span>][<span class="number">55</span>][<span class="number">55</span>][<span class="number">2</span>];</span><br><span class="line"> </span><br><span class="line">int main() &#123;</span><br><span class="line">    ios_base::sync_with_stdio(false);</span><br><span class="line">    cin.tie(nullptr);</span><br><span class="line">#ifdef <span class="symbol">MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, stdin);</span><br><span class="line">//    freopen(<span class="string">"../0out.txt"</span>, <span class="string">"w"</span>, stdout);</span><br><span class="line">#endif</span><br><span class="line"> </span><br><span class="line">    int n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    int odd = (n + <span class="number">1</span>) / <span class="number">2</span>, eve = n / <span class="number">2</span>;</span><br><span class="line">    int a[<span class="number">105</span>] = &#123;&#125;;</span><br><span class="line">    for (int i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        if (a[i]) &#123;</span><br><span class="line">            if (a[i] &amp; <span class="number">1</span>)</span><br><span class="line">                --odd;</span><br><span class="line">            else</span><br><span class="line">                --eve;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    memset(dp, <span class="number">0x3f</span>, sizeof(dp));</span><br><span class="line">    dp[<span class="number">0</span>][odd][eve][<span class="number">0</span>] = dp[<span class="number">0</span>][odd][eve][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    for (int i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        if (a[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            int tt = a[i + <span class="number">1</span>] &amp; <span class="number">1</span>;</span><br><span class="line">            for (int j = <span class="number">0</span>; j &lt; <span class="number">52</span>; ++j) &#123;</span><br><span class="line">                for (int k = <span class="number">0</span>; k &lt; <span class="number">52</span>; ++k) &#123;</span><br><span class="line">                    if (dp[i][j][k][<span class="number">0</span>] != <span class="symbol">INF32</span>) &#123;</span><br><span class="line">                        if (tt) dp[i + <span class="number">1</span>][j][k][<span class="number">1</span>] = min(dp[i][j][k][<span class="number">1</span>], dp[i][j][k][<span class="number">0</span>] + <span class="number">1</span>);</span><br><span class="line">                        else dp[i + <span class="number">1</span>][j][k][<span class="number">0</span>] = min(dp[i][j][k][<span class="number">0</span>], dp[i][j][k][<span class="number">0</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                    if (dp[i][j][k][<span class="number">1</span>] != <span class="symbol">INF32</span>) &#123;</span><br><span class="line">                        if (tt) dp[i + <span class="number">1</span>][j][k][<span class="number">1</span>] = min(dp[i + <span class="number">1</span>][j][k][<span class="number">1</span>], dp[i][j][k][<span class="number">1</span>]);</span><br><span class="line">                        else dp[i + <span class="number">1</span>][j][k][<span class="number">0</span>] = min(dp[i + <span class="number">1</span>][j][k][<span class="number">0</span>], dp[i][j][k][<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            for (int j = <span class="number">0</span>; j &lt; <span class="number">52</span>; ++j) &#123;</span><br><span class="line">                for (int k = <span class="number">0</span>; k &lt; <span class="number">52</span>; ++k) &#123;</span><br><span class="line">                    if (dp[i][j][k][<span class="number">0</span>] != <span class="symbol">INF32</span>) &#123;</span><br><span class="line">                        if (k) dp[i + <span class="number">1</span>][j][k - <span class="number">1</span>][<span class="number">0</span>] = min(dp[i + <span class="number">1</span>][j][k - <span class="number">1</span>][<span class="number">0</span>], dp[i][j][k][<span class="number">0</span>]);</span><br><span class="line">                        if (j) dp[i + <span class="number">1</span>][j - <span class="number">1</span>][k][<span class="number">1</span>] = min(dp[i + <span class="number">1</span>][j - <span class="number">1</span>][k][<span class="number">1</span>], dp[i][j][k][<span class="number">0</span>] + <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    if (dp[i][j][k][<span class="number">1</span>] != <span class="symbol">INF32</span>) &#123;</span><br><span class="line">                        if (k) dp[i + <span class="number">1</span>][j][k - <span class="number">1</span>][<span class="number">0</span>] = min(dp[i + <span class="number">1</span>][j][k - <span class="number">1</span>][<span class="number">0</span>], dp[i][j][k][<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                        if (j) dp[i + <span class="number">1</span>][j - <span class="number">1</span>][k][<span class="number">1</span>] = min(dp[i + <span class="number">1</span>][j - <span class="number">1</span>][k][<span class="number">1</span>], dp[i][j][k][<span class="number">1</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; min(dp[n][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>], dp[n][<span class="number">0</span>][<span class="number">0</span>][<span class="number">1</span>]) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1286B-Numbers-on-Tree"><a href="#1286B-Numbers-on-Tree" class="headerlink" title="1286B Numbers on Tree"></a>1286B Numbers on Tree</h2><p>ä¸€é¢—æœ‰æ ¹æ ‘ï¼Œæ¯ä¸ªç»“ç‚¹æœ‰æƒå€¼$a_i$ï¼Œå†å®šä¹‰$c_i$æ˜¯åœ¨$i$çš„å­æ ‘ä¸­çš„$a_j$å°äº$a_i$çš„æ•°ç›®ï¼Œåˆ¤æ–­æ˜¯å¦åˆæ³•ï¼Œåˆæ³•ç»™å‡ºä¸€ä¸ª$a$çš„æ„é€ ã€‚</p><p>é¦–å…ˆå‡å¦‚åœ¨ä¸€ä¸ªä¸€ç»´åºåˆ—ä¸Šåšç±»ä¼¼é—®é¢˜ï¼Œé‚£ä¹ˆä»å°¾åˆ°å¤´åå‘å¤„ç†ï¼Œè¾¹æ’å…¥è¾¹æ’åºï¼ŒåŒæ—¶ä¿è¯$a$çš„å€¼å”¯ä¸€å°±å¯å¾—åˆ°æ„é€ ã€‚é‚£ä¹ˆå¯¹äºæ ‘ä¸Šæ¥è¯´ã€‚åªè¦ä»$DFS$åºåå‘å¤„ç†ï¼ŒåŒæ ·è¾¹æ’åºè¾¹æ’å…¥ï¼Œç»´æŠ¤åºåˆ—çš„å€¼ï¼Œå°±å¯ä»¥å¾—åˆ°ç­”æ¡ˆã€‚è€Œä¸åˆæ³•æƒ…å†µå°±æ˜¯å½“$i$ç»“ç‚¹çš„æ‰€æœ‰å­ç»“ç‚¹æƒå€¼éƒ½å°äº$a_i$ä»ä¸æ»¡è¶³$c_i$çš„è¦æ±‚ã€‚$O(n^2\log n)$</p><figure class="highlight arduino"><figcaption><span>D.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> c[<span class="number">2005</span>], cnt[<span class="number">2005</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">2005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="built_in">vector</span>&lt;pii&gt; &amp;tmp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v : g[u]) &#123;</span><br><span class="line">        dfs(v, tmp);</span><br><span class="line">        cnt[u] += cnt[v];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (c[u] &gt; cnt[u]) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    cnt[u]++;</span><br><span class="line">    pii t = &#123;c[u], <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">auto</span> p = lower_bound(tmp.<span class="built_in">begin</span>(), tmp.<span class="built_in">end</span>(), t);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> q = p; q &lt; tmp.<span class="built_in">end</span>(); ++q) ++q-&gt;first;</span><br><span class="line">    tmp.insert(p, &#123;c[u], u&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, rt;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, p, t; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p &gt;&gt; t;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="number">0</span>) rt = i;</span><br><span class="line">        <span class="keyword">else</span> g[p].emplace_back(i);</span><br><span class="line">        c[i] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;pii&gt; v;</span><br><span class="line">    dfs(rt, v);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (pii &amp;i : v) c[i.second] = i.first + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">cout</span> &lt;&lt; c[i] &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1286C1-amp-amp-C2-Madhouse-Both-version"><a href="#1286C1-amp-amp-C2-Madhouse-Both-version" class="headerlink" title="1286C1&amp;&amp;C2 Madhouse (Both version)"></a>1286C1&amp;&amp;C2 Madhouse (Both version)</h2><p>æœ‰ä¸€ä¸ªé•¿$n$çš„å­—ç¬¦ä¸²ï¼Œæ¯æ¬¡è¯¢é—®$l r$ï¼Œå§å…¶ä¸­çš„æ‰€æœ‰å­—ä¸²å†…çš„é¡ºåºä¹±æ’åè¿”å›ï¼Œæœ€å¤šä¸‰æ¬¡è¯¢é—®ï¼Œæ±‚åŸå­—ç¬¦ä¸²ã€‚</p><p>å¯¹äº$E1$æ¥è¯´ï¼Œå…ˆé—®$S[1,n]$ï¼Œå†é—®$S[2,n]$ï¼Œç”¨$map$è®°å½•æ’åºåçš„ä¸²å‡ºç°çš„æ¬¡æ•°ï¼Œå†ç›¸å‡å°±å¯ä»¥å¾—åˆ°$S[1,1],S[1,2]â€¦S[1,n]$ï¼Œä¾æ¬¡å°±å¯ä»¥å¾—åˆ°åŸä¸²$S$ã€‚<br>å¯¹äº$E2$æ¥è¯´ï¼Œç”±äºé™åˆ¶äº†è¿”å›ä¸²çš„æ•°ç›®ï¼Œä¸èƒ½ç›´æ¥ç…§æ¬$E1$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‘ç°$S[1,n]$è¯¢é—®çš„ç»“æœæŒ‰é•¿åº¦ä¸åŒæŠŠå­—ç¬¦å‡ºç°æ¬¡æ•°ç»Ÿè®¡èµ·æ¥ï¼Œåœ¨å±‚ä¸å±‚ä¹‹é—´å­—ç¬¦å‡ºç°æ¬¡æ•°ä¸åŒï¼Œå¯ä»¥é€šè¿‡åšå·®ç®—å‡ºè¿™å±‚çš„ä¸¤ç«¯æ˜¯å“ªäº›å­—æ¯,æ¯”å¦‚ï¼š$abcde$</p><script type="math/tex; mode=display">a,b,c,d,e\;(a-1, b-1, c-1, d-1, e-1) \\ab,bc,cd,de(a-1, b-2, c-2, d-2, e-1) \\abc,bcd,cde(a-1, b-2, c-3, d-2, e-1) \\abcd,bcde\quad(a-1, b-2, c-2, d-2, e-1) \\abcde\qquad\;(a-1, b-1, c-1, d-1, e-1)</script><p>ä½†è¿™æ—¶æ— æ³•ç¡®å®šé¦–å°¾é¡ºåºï¼Œé‚£ä¹ˆå†å°†å‰$n/2$æŒ‰$C1$çš„åšæ³•å¾—åˆ°ï¼Œå°±å¯ä»¥æ¨å‡ºåŸä¸²$S$ã€‚</p><figure class="highlight arduino"><figcaption><span>E.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line"><span class="comment">//    freopen("../0in.txt", "r", stdin);</span></span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> r = (n + <span class="number">1</span>) / <span class="number">2</span>, nn = (r + <span class="number">1</span>) * r / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"? 1 "</span> &lt;&lt; r &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nn; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">        sort(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">        ++mp[s];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (r &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"? 2 "</span> &lt;&lt; r &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        nn -= r;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nn; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">            sort(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">            --mp[s];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; tmp;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i : mp) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i.second) tmp.push_back(i.first);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">auto</span> cmp = [](<span class="built_in">string</span> &amp;a, <span class="built_in">string</span> &amp;b) &#123; <span class="keyword">return</span> a.length() &lt; b.length(); &#125;;</span><br><span class="line">    sort(tmp.<span class="built_in">begin</span>(), tmp.<span class="built_in">end</span>(), cmp);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">ans</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">cnt</span><span class="params">(<span class="number">26</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; r; ++i) &#123;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">tcnt</span><span class="params">(<span class="number">26</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> &amp;c : tmp[i])  ++tcnt[c - <span class="string">'a'</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (tcnt[j] &gt; cnt[j])</span><br><span class="line">                ans[i] = j + <span class="string">'a'</span>;</span><br><span class="line">            cnt[j] = tcnt[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nn = (n + <span class="number">1</span>) * n / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"? 1 "</span> &lt;&lt; n &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">num</span><span class="params">(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="number">26</span>))</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nn; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> &amp;c : s) ++num[s.length()][c - <span class="string">'a'</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fill</span>(cnt.<span class="built_in">begin</span>(), cnt.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">    r = n / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= r; ++i) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ht;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> p = (num[<span class="number">1</span>][j] - cnt[j]) * (i + <span class="number">1</span>) - (num[i + <span class="number">1</span>][j] - num[<span class="number">0</span>][j]);</span><br><span class="line">            <span class="keyword">while</span> (p--) &#123;</span><br><span class="line">                ht.emplace_back(j);</span><br><span class="line">                ++cnt[j]; num[<span class="number">0</span>][j] += i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ans[i - <span class="number">1</span>] == ht[<span class="number">0</span>] + <span class="string">'a'</span>) ans[n - i] = ht[<span class="number">1</span>] + <span class="string">'a'</span>;</span><br><span class="line">        <span class="keyword">else</span> ans[n - i] = ht[<span class="number">0</span>] + <span class="string">'a'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"! "</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¢˜è§£ </category>
          
          <category> Codeforces </category>
          
          <category> div2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
            <tag> div2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Educational Codeforces Round 84 é¢˜è§£</title>
      <link href="/1933395439/"/>
      <url>/1933395439/</url>
      
        <content type="html"><![CDATA[<p>åˆè¡€å´©äº†ä¸€åœº<br><a id="more"></a></p><h2 id="1237A-Sum-of-Odd-Integers"><a href="#1237A-Sum-of-Odd-Integers" class="headerlink" title="1237A Sum of Odd Integers"></a>1237A Sum of Odd Integers</h2><p>ç»™ä¸€ä¸ªæ•°$n$ï¼Œé—®èƒ½å¦åˆ†æˆ$k$ä¸ªå¥‡æ•°çš„å’Œã€‚</p><p>å¯ä»¥ç­‰å·®æ•°åˆ—ç®—å‡º$k$ä¸ªå¥‡æ•°æœ€å°çš„å’Œï¼Œä¹‹ååˆ¤æ–­å®ƒå’Œ$n$çš„å…³ç³»å°±å¥½ï¼Œ$O(1)$ã€‚</p><figure class="highlight cpp"><figcaption><span>A.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, k;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line"></span><br><span class="line">        ll mi = ll(<span class="number">1</span> + <span class="number">2</span> * (k - <span class="number">1</span>) + <span class="number">1</span>) * k / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (n - mi &gt;= <span class="number">0</span> &amp;&amp; (n - mi) % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1237B-Princesses-and-Princes"><a href="#1237B-Princesses-and-Princes" class="headerlink" title="1237B Princesses and Princes"></a>1237B Princesses and Princes</h2><p>æœ‰$n$ä¸ªå…¬ä¸»å’Œ$n$ä¸ªç‹å­ï¼Œæ¯ä¸ªå…¬ä¸»æœ‰ä¸€åˆ—å–œæ¬¢çš„ç‹å­ï¼Œå¦‚æœä¸€ä¸ªå…¬ä¸»å–œæ¬¢çš„ç‹å­æ²¡è¢«åˆ†é…çš„æ—¶å€™ï¼Œå¥¹ä¼šå’Œæœ€å°ç¼–å·çš„ç‹å­ç»“åˆã€‚ç°åœ¨å¯ä»¥ç»™ä¸€ä¸ªå…¬ä¸»åŠ ä¸€ä¸ªå–œæ¬¢çš„äººï¼Œé—®æ˜¯å¦éœ€è¦ï¼Œå¦‚æœéœ€è¦ï¼Œæ–¹æ¡ˆæ˜¯ä»€ä¹ˆã€‚</p><p>å¦‚æœä¸€ä¸ªå…¬ä¸»å‰©ä¸‹äº†ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ä¸€ä¸ªç‹å­å‰©ä¸‹ï¼Œé‚£ä¹ˆé€‰æ‹©ä¸€å¯¹ç»“åˆå°±å¥½ï¼Œ$O(n)$ã€‚</p><figure class="highlight cpp"><figcaption><span>B.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, la = <span class="number">-1</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> k, t, f = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">            <span class="keyword">while</span> (k--) &#123;</span><br><span class="line">                <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">                <span class="keyword">if</span> (!f &amp;&amp; !b[t]) b[t] = f = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!f) la = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (la == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"OPTIMAL"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!b[i]) &#123;</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">"IMPROVE"</span> &lt;&lt; <span class="built_in">endl</span></span><br><span class="line">                     &lt;&lt; la &lt;&lt; <span class="string">' '</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1237C-Game-with-Chips"><a href="#1237C-Game-with-Chips" class="headerlink" title="1237C Game with Chips"></a>1237C Game with Chips</h2><p>åœ¨ä¸€ä¸ª$n\times m$çš„æ ¼å­ä¸Šæœ‰$n$ä¸ªå¯ç§»åŠ¨ç‚¹ä»¥åŠå¯¹åº”$n$ä¸ªç›®æ ‡ç‚¹ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥è®©æ‰€æœ‰å¯ç§»åŠ¨çš„ç‚¹å…¨éƒ¨ä¸Šä¸‹å·¦å³ç§»åŠ¨ä¸€æ ¼ï¼Œè¦æ±‚åœ¨$2nm$æ¬¡æ“ä½œå†…è®©æ‰€æœ‰ç‚¹ç»è¿‡ç›®æ ‡ç‚¹è‡³å°‘ä¸€æ¬¡ï¼Œè¾“å‡ºæ–¹æ¡ˆã€‚</p><p>å…ˆç”¨$n+m-2$æ¬¡æ“ä½œå°†æ‰€æœ‰ç‚¹ç§»åŠ¨åˆ°ä¸€è§’ï¼Œå†ç”¨$n\times m-1$æ¬¡æ“ä½œéå†æ‰€æœ‰æ ¼å­ï¼Œ$O(nm)$ã€‚</p><figure class="highlight cpp"><figcaption><span>C.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, m, k, a, b;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k * <span class="number">2</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; n + m - <span class="number">2</span> + n * (m - <span class="number">1</span>) + n &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; m; ++i)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">'L'</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">'U'</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; m; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &amp; <span class="number">1</span>)</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">'L'</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">'R'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">'D'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1237D-Infinite-Path"><a href="#1237D-Infinite-Path" class="headerlink" title="1237D Infinite Path"></a>1237D Infinite Path</h2><p>æœ‰ä¸€ä¸ªé•¿ä¸º$n$çš„æ’åˆ—ï¼Œæ¯ä¸ªä½ç½®æœ‰ä¸€ä¸ªé¢œè‰²ï¼Œé—®æœ€å°‘åšå‡ æ¬¡ç½®æ¢åæŸäº›ä½ç½®å¯ä»¥äº§ç”Ÿä¸€ä¸ªåŒè‰²çš„ç¯ã€‚</p><p>å¯¹äºä¸€ä¸ªé•¿$m$çš„å°ç¯æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªæ€§è´¨æ˜¯ï¼š$p^k[x_i] = x_{(i+k)\;mod\;m}$ï¼Œé‚£ä¹ˆç¬¬$k$æ¬¡ç½®æ¢å¯ä»¥å°†åŸæ¥çš„ç¯åˆ†ä¸º$GCD(k, m)$ä¸ªå°ç¯ï¼Œåªéœ€è¦å¯¹$p^0$çš„æ¯ä¸ªå°ç¯æšä¸¾å› å­å–åŒè‰²æˆç«‹çš„æœ€å°å€¼å°±å¥½ï¼Œ$O(n^{\frac {4}{3}})$ã€‚</p><figure class="highlight arduino"><figcaption><span>D.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> p[N], c[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">cin</span> &gt;&gt; p[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">cin</span> &gt;&gt; c[i];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = INF32;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c[i]) &#123;</span><br><span class="line">                tmp.<span class="built_in">clear</span>();</span><br><span class="line">                <span class="keyword">int</span> j = i;</span><br><span class="line">                <span class="keyword">while</span> (c[j]) &#123;</span><br><span class="line">                    tmp.emplace_back(c[j]);</span><br><span class="line">                    c[j] = <span class="number">0</span>; j = p[j];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">int</span> m = tmp.<span class="built_in">size</span>();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k * k &lt;= m; ++k) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (m % k) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> strt = <span class="number">0</span>; strt &lt; k; ++strt) &#123;</span><br><span class="line">                        <span class="keyword">bool</span> ok = <span class="literal">true</span>;</span><br><span class="line">                        j = strt;</span><br><span class="line">                        <span class="keyword">while</span> (j &lt; m) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (tmp[j] != tmp[(j + k) % m]) &#123;</span><br><span class="line">                                ok = <span class="literal">false</span>; <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            j += k;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (ok) ans = <span class="built_in">min</span>(ans, k);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> strt = <span class="number">0</span>; strt &lt; m / k; ++strt) &#123;</span><br><span class="line">                        <span class="keyword">bool</span> ok = <span class="literal">true</span>;</span><br><span class="line">                        j = strt;</span><br><span class="line">                        <span class="keyword">while</span> (j &lt; m) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (tmp[j] != tmp[(j + m / k) % m]) &#123;</span><br><span class="line">                                ok = <span class="literal">false</span>; <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            j += m / k;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (ok) ans = <span class="built_in">min</span>(ans, m / k);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1237E-Count-The-Blocks"><a href="#1237E-Count-The-Blocks" class="headerlink" title="1237E Count The Blocks"></a>1237E Count The Blocks</h2><p>ä¸€ä¸ªé•¿ä¸º$n$çš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªä½ç½®ç”±$0\sim 9$ç»„æˆï¼Œä¸€ä¸ªä¸²ä¸­è¿ç»­ç›¸åŒçš„æ•°å­—åˆ†æˆä¸€ä¸ªé•¿$x$çš„æ®µï¼Œé—®æ‰€æœ‰å­—ç¬¦ä¸²ä¸­é•¿ä¸º$1\sim n$çš„æ®µçš„æ•°ç›®åˆ†åˆ«æ˜¯å¤šå°‘ã€‚</p><p>åˆ†ä¸‰ç§æƒ…å†µDPï¼š</p><ul><li>é•¿ä¸º$n$çš„æ®µåªæœ‰10ç§ï¼›</li><li>ä»å·¦/å³å¼€å§‹çš„ï¼Œè‡ªå·±æœ‰$1$ç§é€‰æ³•ï¼Œç›¸é‚»çš„ä½ç½®æœ‰$9$ç§é€‰æ³•ï¼Œå‰©ä¸‹ä½ç½®ä»»é€‰ï¼Œ$10*9*10^{n-len-1}$ï¼›</li><li>ä»ä¸­é—´æ”¾çš„ï¼Œä¸ä¸Šè¾¹ç±»ä¼¼ï¼Œ$10*9*9*10^{n-len-2}$ã€‚</li></ul><p>ä¹Ÿå¯ä»¥æ‰¾è§„å¾‹ï¼Œå…¬å¼æ˜¯ï¼š</p><script type="math/tex; mode=display">\begin{cases}ans_n = 10, &\text{} \\ans_{n-1} = 180, &\text{} \\ans_{i} = 20*ans_{i+1}-100*ans_{i+2}, &\text{(iâ‰¤n-2)}\end{cases}</script><figure class="highlight cpp"><figcaption><span>E.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">ll a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"../0out.txt"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    a[n] = <span class="number">10</span>;</span><br><span class="line">    a[n - <span class="number">1</span>] = <span class="number">180</span>;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">1</span>)</span><br><span class="line">        a[n - <span class="number">2</span>] = <span class="number">2610</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">3</span>; i &gt; <span class="number">0</span>; --i) &#123;</span><br><span class="line">        a[i] = (<span class="number">20</span> * a[i + <span class="number">1</span>] - <span class="number">100</span> * a[i + <span class="number">2</span>] % mod + mod) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1237F-AND-Segments"><a href="#1237F-AND-Segments" class="headerlink" title="1237F AND Segments"></a>1237F AND Segments</h2><p>æœ‰ä¸€ä¸ªé•¿ä¸º$n$çš„æ•°åˆ—ï¼Œ$m$ä¸ªå½¢å¦‚$\{l,r,x\}$çš„é™åˆ¶ï¼Œè¦$a[l] \&amp; a[l+1] \&amp; \dots \&amp; a[r] = x$ï¼Œé—®æœ‰å¤šå°‘ç§ä¸åŒçš„æ•°åˆ—æ»¡è¶³æ¡ä»¶ã€‚</p><p>æ¯ä¸€ä½åˆ†å¼€è€ƒè™‘ï¼Œå¯¹äºæŸä¸ª$x_i$å¼è¿™ä¸€ä½ä¸º$1$çš„é™åˆ¶ï¼Œé‚£ä¹ˆ$a[l],a[l+1],â€¦,a[r]$çš„è¿™ä¸€ä½å¿…é¡»éƒ½ä¸º$1$ã€‚åä¹‹ï¼Œ$a[l],a[l+1],â€¦,a[r]$çš„è¿™ä¸€ä¸ºè‡³å°‘æœ‰1ä¸ªä¸º$0$ï¼Œå¯ä»¥é¢„å¤„ç†å‡ºæŸäº›ä½ç½®å¿…é¡»æ”¾$1$æˆ–$1,0$éƒ½å¯ä»¥ã€‚<br>è®¾$dp[i][j]$è¡¨ç¤ºå¤„ç†åˆ°ç¬¬$i$ä½æ—¶ä¸Šä¸€æ¬¡æ”¾$0$çš„æ˜¯ç¬¬$j$ä¸ªæ•°ï¼š</p><ul><li>å¦‚æœæ”¾$1$ï¼Œé‚£ä¹ˆ$dp[i][j] = dp[i-1][j]$ï¼›</li><li>å¦‚æœæ”¾$0$ï¼Œé‚£ä¹ˆ$dp[i][i] = \sum_{j=1}^{i-1} {dp[i-1][j]}$ã€‚<br>å¯¹äºæŸæ®µå¿…é¡»ä¸º0ï¼Œä¹Ÿå°±æ˜¯å°†$dp[r][0]$åˆ°$dp[r][l+1]$ç½®$0$ã€‚å¾ˆæ˜æ˜¾å¯ä»¥æ»šåŠ¨æ•°ç»„ï¼Œæ”¾$0$æ“ä½œå¯ä»¥ç”¨å‰ç¼€å’Œè½¬ç§»ï¼Œè€Œæ¸…$0$åå‰é¢å°±ä¸ç”¨è€ƒè™‘äº†ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ª$j$åªä¼šè¢«åˆ $1$æ¬¡ï¼Œç»´æŠ¤ä¸€ä¸ªæŒ‡é’ˆå°±å¥½ï¼Œ$O(n)$ã€‚</li></ul><figure class="highlight excel"><figcaption><span>F.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const <span class="built_in">int</span> <span class="built_in">N</span> = <span class="number">5</span>e5 + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> <span class="built_in">n</span>, m;</span><br><span class="line">vector&lt;<span class="built_in">int</span>&gt; l, r, x;</span><br><span class="line"></span><br><span class="line">ll calc(<span class="built_in">int</span> p) &#123;</span><br><span class="line">    vector&lt;<span class="built_in">int</span>&gt; has(<span class="built_in">n</span> + <span class="number">2</span>), las(<span class="built_in">n</span> + <span class="number">2</span>);</span><br><span class="line">    vector&lt;ll&gt; dp(<span class="built_in">n</span> + <span class="number">2</span>);</span><br><span class="line">    p = <span class="number">1</span> &lt;&lt; p;</span><br><span class="line">    for (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">if</span> (x[i] &amp; p) &#123;</span><br><span class="line">            ++has[l[i]];</span><br><span class="line">            --has[r[i] + <span class="number">1</span>];</span><br><span class="line">        &#125; else</span><br><span class="line">            las[r[i]] = <span class="built_in">max</span>(las[r[i]], l[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    for (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= <span class="built_in">n</span>; ++i) &#123;</span><br><span class="line">        has[i] += has[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> last = <span class="number">0</span>;</span><br><span class="line">    ll <span class="built_in">sum</span> = <span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    for (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= <span class="built_in">n</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">if</span> (!has[i]) &#123;</span><br><span class="line">            dp[i] = <span class="built_in">sum</span>;</span><br><span class="line">            <span class="built_in">sum</span> = <span class="built_in">sum</span> * <span class="number">2</span> % <span class="built_in">mod</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ll tmp = <span class="number">0</span>;</span><br><span class="line">        while (last &lt; las[i]) &#123;</span><br><span class="line">            tmp = (tmp + dp[last++]) % <span class="built_in">mod</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sum</span> = (<span class="built_in">sum</span> - tmp + <span class="built_in">mod</span>) % <span class="built_in">mod</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="built_in">sum</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> main() &#123;</span><br><span class="line">    ios_ba<span class="symbol">se:</span><span class="symbol">:sy</span>nc_with_stdio(<span class="built_in">false</span>);</span><br><span class="line">    cin.tie(nullptr);</span><br><span class="line">#ifdef MYDEBUG</span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, stdin);</span><br><span class="line">//    freopen(<span class="string">"../0out.txt"</span>, <span class="string">"w"</span>, stdout);</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> k;</span><br><span class="line">    cin &gt;&gt; <span class="built_in">n</span> &gt;&gt; k &gt;&gt; m;</span><br><span class="line">    l.resize(m);</span><br><span class="line">    r = x = l;</span><br><span class="line">    for (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; m; ++i)</span><br><span class="line">        cin &gt;&gt; l[i] &gt;&gt; r[i] &gt;&gt; x[i];</span><br><span class="line"></span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    for (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">        ans = ans * calc(i) % <span class="built_in">mod</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1237G-Letters-and-Question-Marks"><a href="#1237G-Letters-and-Question-Marks" class="headerlink" title="1237G Letters and Question Marks"></a>1237G Letters and Question Marks</h2><p>æœ‰$k$ä¸ªæ¨¡å¼ä¸²$t_1,t_2,â€¦,t_k$ï¼Œæ¯ä¸ªä¸²å¸¦æœ‰ä¸€ä¸ªæƒå€¼ï¼Œå’Œä¸€ä¸ªæ–‡æœ¬ä¸²$S$ï¼Œå‡æœ‰$a\sim n$ç»„æˆï¼Œå®šä¹‰$S$çš„å€¼æ˜¯$t_i$åœ¨$S$å‡ºç°çš„æ¬¡æ•°$\times$è‡ªå·±çš„æƒå€¼ã€‚$S$ä¸­è‡³å¤šå‡ºç°$14$ä¸ªé—®å·ï¼Œç”¨$a\sim n$å†…ä¸åŒçš„å­—æ¯å¡«å…¥åï¼Œ$S$æœ€å¤§çš„æƒå€¼æ˜¯å¤šå°‘ã€‚</p><p>ACè‡ªåŠ¨æœº+DPï¼Œè®¾$dp[i][j][k]$è¡¨ç¤ºå¤„ç†åˆ°ç¬¬$i$ä¸ªå­—ç¬¦ï¼Œåœ¨è‡ªåŠ¨æœºèŠ‚ç‚¹$j$ï¼Œå·²ç”¨å­—ç¬¦é›†çš„çŠ¶æ€æ˜¯$k$ï¼Œåœ¨æšä¸¾åˆ°é—®å·çš„æ—¶å€™æšä¸¾è½¬ç§»å­—ç¬¦ï¼Œä¸€è·¯åŠ ä¸Šæƒå€¼å°±å¯ä»¥å¾—åˆ°ç­”æ¡ˆï¼Œä½†è¿™æ ·å¤æ‚åº¦æ˜¯$O(\lvert S \rvert*2^{14}*\sum {t})$ã€‚<br>å¾ˆæ˜æ˜¾ï¼Œå¯¹äºè¢«$?$åˆ†å‰²å‡ºæ¥çš„å­—ä¸²ï¼Œåªè¦çŸ¥é“å¼€å¤´åœ¨è‡ªåŠ¨æœºçš„èŠ‚ç‚¹ï¼Œå°±å¯ä»¥ç¡®å®šæœ«å°¾è½¬ç§»åˆ°çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé¢„å¤„ç†è‡ªåŠ¨æœºæ¯ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œ$S$ä¸­ç¬¬$i$ä¸ªå­—ä¸²è½¬ç§»çš„ç»“æœï¼Œå°±å¯ä»¥$O(1)$è½¬ç§»ã€‚é‡è®¾$dp[i][j][k]$ï¼Œå…¶ä¸­$i$è¡¨ç¤ºå¤„ç†åˆ°ç¬¬$i$ä¸ªé—®å·ï¼Œå¯ä»¥å‘ç°$i=k$ä¸­ä½¿ç”¨è¿‡çš„å­—ç¬¦æ•°é‡ï¼Œåªéœ€è¦è®¾äºŒç»´ï¼Œ$O(|S|*\sum {t} + 14*2^{14}*\sum {t})$</p><figure class="highlight arduino"><figcaption><span>G.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e3</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> sz = (<span class="number">1</span> &lt;&lt; <span class="number">14</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="keyword">String</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> csize = <span class="number">14</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ahcm</span> &#123;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> nd node[u]</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">NODE</span> &#123;</span></span><br><span class="line">            <span class="keyword">int</span> ch[csize];</span><br><span class="line">            <span class="keyword">int</span> fail, val;</span><br><span class="line">        &#125; node[N];</span><br><span class="line">        <span class="keyword">int</span> numv;</span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q, q;</span><br><span class="line"></span><br><span class="line">        ahcm() &#123;</span><br><span class="line">            numv = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="built_in">string</span> &amp;s, <span class="keyword">int</span> &amp;v)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> u = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> &amp;c : s) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!nd.ch[c - <span class="string">'a'</span>])</span><br><span class="line">                    nd.ch[c - <span class="string">'a'</span>] = ++numv;</span><br><span class="line">                u = nd.ch[c - <span class="string">'a'</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            nd.val += v;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> &amp;i : node[<span class="number">0</span>].ch) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i)</span><br><span class="line">                    Q.emplace(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (!Q.empty()) &#123;</span><br><span class="line">                <span class="keyword">int</span> u = Q.front();</span><br><span class="line">                Q.pop();</span><br><span class="line"></span><br><span class="line">                q.emplace(u);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; csize; ++i) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (nd.ch[i]) &#123;</span><br><span class="line">                        node[nd.ch[i]].fail = node[nd.fail].ch[i];</span><br><span class="line">                        node[nd.ch[i]].val += node[node[nd.ch[i]].fail].val;</span><br><span class="line">                        Q.emplace(nd.ch[i]);</span><br><span class="line">                    &#125; <span class="keyword">else</span></span><br><span class="line">                        nd.ch[i] = node[nd.fail].ch[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">pil <span class="title">calc</span><span class="params">(<span class="keyword">int</span> u, <span class="built_in">string</span> &amp;s)</span> </span>&#123;</span><br><span class="line">            ll v = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> &amp;c : s) &#123;</span><br><span class="line">                u = nd.ch[c - <span class="string">'a'</span>];</span><br><span class="line">                v += nd.val;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> &#123;u, v&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="keyword">String</span>;</span><br><span class="line"></span><br><span class="line">ahcm am;</span><br><span class="line">pil go[<span class="number">1005</span>][<span class="number">18</span>];</span><br><span class="line">ll dp[<span class="number">1005</span>][sz];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, v;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s &gt;&gt; v;</span><br><span class="line">        am.insert(s, v);</span><br><span class="line">    &#125;</span><br><span class="line">    am.build();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    <span class="keyword">int</span> la = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; seg;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">'?'</span>) &#123;</span><br><span class="line">            seg.push_back(s.substr(la, i - la));</span><br><span class="line">            la = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    seg.push_back(s.substr(la));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; seg.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= am.numv; ++j) &#123;</span><br><span class="line">            go[j][i] = am.calc(j, seg[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= am.numv; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sz; ++j) &#123;</span><br><span class="line">            dp[i][j] = -INF64;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[go[<span class="number">0</span>][<span class="number">0</span>].first][<span class="number">0</span>] = go[<span class="number">0</span>][<span class="number">0</span>].second;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sz; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= am.numv; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[j][i] == -INF64) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">14</span>; ++k) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((i &gt;&gt; k) &amp; <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> to = am.node[j].ch[k];</span><br><span class="line">                <span class="keyword">int</span> ns = i | (<span class="number">1</span> &lt;&lt; k);</span><br><span class="line">                <span class="keyword">int</span> count = __builtin_popcount(ns);</span><br><span class="line">                <span class="keyword">if</span> (count &gt;= seg.<span class="built_in">size</span>()) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> <span class="built_in">end</span> = go[to][count].first;</span><br><span class="line">                ll val = go[to][count].second + am.node[to].val;</span><br><span class="line">                dp[<span class="built_in">end</span>][ns] = <span class="built_in">max</span>(dp[<span class="built_in">end</span>][ns], dp[j][i] + val);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = -INF64;</span><br><span class="line">    <span class="keyword">int</span> cnt = seg.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sz; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= am.numv; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (__builtin_popcount(i) == cnt)</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, dp[j][i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¢˜è§£ </category>
          
          <category> Codeforces </category>
          
          <category> edu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
            <tag> edu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round 629 Div.3 é¢˜è§£</title>
      <link href="/3109273033/"/>
      <url>/3109273033/</url>
      
        <content type="html"><![CDATA[<p>æ²¡ä»€ä¹ˆæ„æ€çš„ä¸€åœºdiv3<br><a id="more"></a></p><h2 id="1238A-Divisibility-Problem"><a href="#1238A-Divisibility-Problem" class="headerlink" title="1238A Divisibility Problem"></a>1238A Divisibility Problem</h2><p>æ±‚ç»™$a$åŠ $1$å‡ æ¬¡å¯ä»¥æˆä¸º$b$çš„å€æ•°ï¼Œ$O(1)$ã€‚</p><figure class="highlight cpp"><figcaption><span>A.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; (b - a % b) % b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1238B-K-th-Beautiful-String"><a href="#1238B-K-th-Beautiful-String" class="headerlink" title="1238B K-th Beautiful String"></a>1238B K-th Beautiful String</h2><p>ä¸€ä¸ªé•¿åº¦ä¸º$n$çš„å­—ç¬¦ä¸²ï¼Œåªæœ‰$2$ä¸ª$b$,å‰©ä¸‹éƒ½æ˜¯$a$ï¼Œé—®å­—å…¸åºç¬¬$k$å¤§çš„æ˜¯å“ªä¸ªä¸²ã€‚</p><p>å› ä¸ºåªæœ‰$2$ä¸ª$b$ï¼Œæ‰€ä»¥é€šè¿‡ä¸¤ä¸ª$b$çš„ä½ç½®çŸ¥é“æ˜¯ç¬¬å‡ è¯å…¸åºï¼Œ$O(k)$ã€‚</p><figure class="highlight cpp"><figcaption><span>B.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, k, i1 = <span class="number">2</span>, i2;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">        <span class="keyword">while</span> (k) &#123;</span><br><span class="line">            <span class="keyword">if</span> (k &lt;= (i1 - <span class="number">1</span>)) <span class="keyword">break</span>;</span><br><span class="line">            k -= i1 - <span class="number">1</span>;</span><br><span class="line">            ++i1;</span><br><span class="line">        &#125;</span><br><span class="line">        i2 = k;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt; <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == i1 || i == i2)</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">'b'</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">'a'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1238C-Ternary-XOR"><a href="#1238C-Ternary-XOR" class="headerlink" title="1238C Ternary XOR"></a>1238C Ternary XOR</h2><p>æœ‰ä¸¤ä¸ªé•¿ä¸º$n$ä»…ç”±$0,1,2$ç»„æˆçš„æ•°ï¼Œå®šä¹‰å®ƒä»¬çš„å¼‚æˆ–æ˜¯æ¨¡ä¸è¿›ä½$3$åŠ æ³•ï¼Œç»™å‡ºç»“æœï¼Œæ±‚ä¸€ç»„åŸå§‹çš„æ•°$a,b$ï¼Œè¦æ±‚$max(a,b)$æœ€å°ã€‚</p><ul><li>å¦‚æœ$x_i = 0$ï¼Œé‚£ä¹ˆ$a_i = b_i = 0$ï¼›</li><li>ç¬¬ä¸€æ¬¡$x_i = 1$ï¼Œç»™$a,b$ä¹‹ä¸€èµ‹$1$ï¼Œä¹‹åå‡ºç°çš„è¯ç»™å¦ä¸€ä¸ªæ•°èµ‹$1$ï¼›</li><li>å¦‚æœ$x_i = 2$ï¼Œä¸”$a,b$ä¸€ç›´ç›¸ç­‰ï¼Œé‚£ä¹ˆ$a_i = b_i = 0$ï¼Œå¦‚æœå·²ç»ä¸ç›¸ç­‰ï¼Œç»™å°çš„æ•°èµ‹$2$ã€‚<br>$O(n)$</li></ul><figure class="highlight cpp"><figcaption><span>C.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="built_in">string</span> s, a, b;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; s;</span><br><span class="line">        a.resize(n);</span><br><span class="line">        b.resize(n);</span><br><span class="line">        <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] == <span class="string">'2'</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!f)</span><br><span class="line">                    a[i] = b[i] = <span class="string">'1'</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    a[i] = <span class="string">'2'</span>, b[i] = <span class="string">'0'</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'0'</span>)</span><br><span class="line">                a[i] = b[i] = <span class="string">'0'</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!f) &#123;</span><br><span class="line">                b[i] = <span class="string">'1'</span>, a[i] = <span class="string">'0'</span>;</span><br><span class="line">                f = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                a[i] = <span class="string">'1'</span>, b[i] = <span class="string">'0'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1238D-Carousel"><a href="#1238D-Carousel" class="headerlink" title="1238D Carousel"></a>1238D Carousel</h2><p>ä¸€ä¸ªé•¿$n$çš„ç¯ï¼Œç¯ä¸Šæ¯ä¸ªæ•°éƒ½æœ‰ç§ç±»ï¼Œè¦æ±‚ç›¸é‚»ä¸”ä¸åŒç§ç±»çš„æ•°è¢«æ¶‚çš„é¢œè‰²ä¸åŒï¼Œé—®æœ€å°‘é¢œè‰²æ•°çš„æ–¹æ¡ˆã€‚</p><ul><li>å¦‚æœåªæœ‰ä¸€ç§ï¼Œå…¨éƒ¨æ¶‚ä¸€ç§é¢œè‰²ï¼›</li><li>å¦‚æœæ¯ç§é¢œè‰²ä¸€ä¸ªï¼Œç¯é•¿ä¸ºå¶æ•°ï¼Œåªéœ€è¦ä¸¤ç§é¢œè‰²é—´éš”æ¶‚ï¼›ç¯é•¿ä¸ºå¥‡æ•°ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªæ¶‚é¢œè‰²$3$ï¼›</li><li>å¦‚æœæŸç§é¢œè‰²æœ‰å¤šä¸ªï¼Œç¯é•¿ä¸ºå¶æ•°ï¼Œåªéœ€è¦é—´éš”æ¶‚è‰²ï¼›ç¯é•¿ä¸ºå¥‡æ•°ï¼Œä»æŸä¸ªç›¸é‚»ä¸ºåŒç§çš„æ•°æ–­å¼€é—´éš”æ¶‚è‰²ã€‚<br>$O(n)$</li></ul><figure class="highlight cpp"><figcaption><span>D.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">5e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        a[n] = a[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i - <span class="number">1</span>] != a[i]) &#123;</span><br><span class="line">                f = <span class="number">0</span>; <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (f) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">while</span> (n--) <span class="built_in">cout</span> &lt;&lt; <span class="string">"1 "</span>;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        f = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i - <span class="number">1</span>] == a[i]) &#123;</span><br><span class="line">                f = i; <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!f &amp;&amp; (n &amp; <span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">3</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i % <span class="number">2</span> + <span class="number">1</span> &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">3</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">cout</span> &lt;&lt; i % <span class="number">2</span> + <span class="number">1</span> &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; f; ++i) <span class="built_in">cout</span> &lt;&lt; i % <span class="number">2</span> + <span class="number">1</span> &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = f; i &lt; n; ++i) <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> - i % <span class="number">2</span> &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1238E-Tree-Queries"><a href="#1238E-Tree-Queries" class="headerlink" title="1238E Tree Queries"></a>1238E Tree Queries</h2><p>ä¸€ä¸ªæœ‰$n$ä¸ªç‚¹ä»¥$1$ä¸ºæ ¹çš„æ ‘ï¼Œæ¯æ¬¡è¯¢é—®é—®$k$ä¸ªç‚¹ï¼Œæ˜¯å¦æœ‰ä¸€æ¡ä»æ ¹åˆ°æŸä¸ªèŠ‚ç‚¹$u$çš„è·¯å¾„ï¼Œä½¿å¾—æ¯ä¸ªç‚¹è·ç¦»è¿™æ¡è·¯$â‰¤1$ã€‚</p><p>åšæ³•å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œæ˜¯æ‰¾å‡ºæ·±åº¦æœ€æ·±çš„ç‚¹ï¼Œå’Œå…¶ä»–è¯¢é—®ç‚¹æ±‚å‡º$LCA$ï¼Œå…¶ä»–ç‚¹å’Œå¯¹åº”çš„$LCA$æ·±åº¦å·®$â‰¤1$ã€‚<br>$O(q\log n)$</p><figure class="highlight cpp"><figcaption><span>E.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> fa[N][<span class="number">22</span>], dpt[N], n;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[N];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            fa[j][i] = fa[fa[j][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dpt[a] &lt; dpt[b]) &#123;</span><br><span class="line">        swap(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">20</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (dpt[a] - (<span class="number">1</span> &lt;&lt; i) &gt;= dpt[b])</span><br><span class="line">            a = fa[a][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">20</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (fa[a][i] != fa[b][i]) &#123;</span><br><span class="line">            a = fa[a][i];</span><br><span class="line">            b = fa[b][i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a == b)</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">return</span> fa[a][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u = <span class="number">1</span>, <span class="keyword">int</span> pre = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">    fa[u][<span class="number">0</span>] = pre;</span><br><span class="line">    dpt[u] = dpt[pre] + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> &amp;v : g[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (v == pre) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        g[u].emplace_back(v);</span><br><span class="line">        g[v].emplace_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs();</span><br><span class="line">    init();</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">        v.resize(k);</span><br><span class="line">        <span class="keyword">int</span> mi = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; v[i];</span><br><span class="line">            <span class="keyword">if</span> (dpt[v[i]] &gt; dpt[mi]) mi = v[i];</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">int</span> f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dpt[v[i]] - dpt[lca(mi, v[i])] &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                f = <span class="number">0</span>; <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (f)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1238F-Make-k-Equal"><a href="#1238F-Make-k-Equal" class="headerlink" title="1238F Make k Equal"></a>1238F Make k Equal</h2><p>ä¸€ä¸ªé•¿ä¸º$n$çš„æ•°åˆ—ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€ä¸ªæœ€å¤§å€¼$-1$ï¼Œæˆ–é€‰ä¸€ä¸ªæœ€å°å€¼$+1$ï¼Œé—®æœ€å°‘æ“ä½œå‡ æ¬¡å¯ä»¥è®©$k$ä¸ªæ•°ç›¸ç­‰ã€‚</p><p>é¦–å…ˆæœ€åç›¸ç­‰çš„å€¼æ˜¯æ•°åˆ—é‡Œçš„å€¼ï¼Œé‚£ä¹ˆæšä¸¾è¿™äº›å€¼ï¼Œæ¯”è¾ƒä»å°æ“ä½œï¼Œä»å¤§æ“ä½œï¼Œä¸¤è¾¹æ“ä½œçš„ç­”æ¡ˆå–æœ€å°å°±å¥½äº†$($ç«Ÿç„¶$2400$è¿™åˆ†ä¹Ÿé£˜çš„å¤ªè¿œäº†$)$ã€‚$O(n\log n)$</p><figure class="highlight arduino"><figcaption><span>F.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"> </span><br><span class="line">ll a[N];</span><br><span class="line">ll pre[N], suf[N];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">int</span> n, k;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        ++mp[a[i]];</span><br><span class="line">        <span class="keyword">if</span> (mp[a[i]] == k) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = INF64, lcnt = <span class="number">0</span>, rcnt = n;</span><br><span class="line">    sort(a, a + n + <span class="number">1</span>);</span><br><span class="line">    n = unique(a, a + n + <span class="number">1</span>) - a;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        pre[i] = pre[i - <span class="number">1</span>] + mp[a[i - <span class="number">1</span>]] * a[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt; <span class="number">0</span>; --i) &#123;</span><br><span class="line">        suf[i] = suf[i + <span class="number">1</span>] + mp[a[i + <span class="number">1</span>]] * a[i + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        ll t = k - mp[a[i]];</span><br><span class="line">        rcnt -= mp[a[i]];</span><br><span class="line">        ll t1 = lcnt * a[i] - pre[i];</span><br><span class="line">        ll t2 = suf[i] - rcnt * a[i];</span><br><span class="line">        <span class="keyword">if</span> (lcnt &gt;= t) ans = <span class="built_in">min</span>(ans, t1 - (lcnt - t));</span><br><span class="line">        <span class="keyword">if</span> (rcnt &gt;= t) ans = <span class="built_in">min</span>(ans, t2 - (rcnt - t));</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, t1 + t2 - (lcnt + rcnt - t));</span><br><span class="line">        lcnt += mp[a[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¢˜è§£ </category>
          
          <category> Codeforces </category>
          
          <category> div3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
            <tag> div3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020 Google Kickstart Round A é¢˜è§£</title>
      <link href="/3017366074/"/>
      <url>/3017366074/</url>
      
        <content type="html"><![CDATA[<p>æ„Ÿè§‰è¿™åœºæ¯”è¾ƒç®€å•ï¼Ÿä¸è¿‡è‡ªå·±è¿˜æ˜¯æŒºsdçš„ï¼Œå·¨æ…¢ï¼Œrk1ç›´æ¥16åˆ†é’Ÿå°±akäº†ï¼Œè€Œæˆ‘æ•´äº†2å°æ—¶æ´»ã€‚ã€‚ã€‚<br><a id="more"></a></p><h2 id="Allocation"><a href="#Allocation" class="headerlink" title="Allocation"></a>Allocation</h2><p>æœ‰$N$ä¸ªæˆ¿å­ï¼Œæ¯ä¸ªæˆ¿å­éƒ½æœ‰è‡ªå·±çš„ä»·æ ¼$A_i$ï¼Œç°åœ¨æ‰‹ä¸Šæœ‰$B$ï¼Œé—®æœ€å¤šèƒ½ä¹°æˆ¿å­çš„æ•°é‡ã€‚</p><p>åªè¦æ’åºåè´ªå¿ƒä»å°ä¹°åˆ°å¤§å°±å¯ä»¥äº†ï¼Œ$O(n\log n)$ï¼ŒC++è¯­æ³•é¢˜ã€‚</p><figure class="highlight cpp"><figcaption><span>Allocation.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> T = <span class="number">1</span>; T &lt;= t; ++T) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, b;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; b;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        sort(a, a + n, less&lt;&gt;());</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; b &gt;= a[i]; ++i) &#123;</span><br><span class="line">            ++ans;</span><br><span class="line">            b -= a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, T, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Plates"><a href="#Plates" class="headerlink" title="Plates"></a>Plates</h2><p>æœ‰$N$å †ç›˜å­ï¼Œæ¯å †æœ‰&amp;K&amp;ä¸ªï¼Œæ¯ä¸ªç›˜å­æœ‰æƒå€¼ã€‚ç°åœ¨éœ€è¦ä»ä¸­é€‰æ‹©$P$ä¸ªç›˜å­ï¼Œæ¯å †ç›˜å­éƒ½å¿…é¡»åƒæ ˆä¸€æ ·ä»é¡¶å¼€å§‹å–ï¼Œé—®å–$P$ä¸ªå¯ä»¥è·å¾—çš„æœ€å¤§æƒå€¼å’Œæ˜¯å¤šå°‘ã€‚</p><p>æˆ‘å†™äº†ä¸ªæš´åŠ›DPï¼Œé¢„å¤„ç†$sum[i][j]$è¡¨ç¤ºç¬¬$i$å †å–å‰$j$ä¸ªç›˜å­çš„å‰ç¼€å’Œã€‚æšä¸¾æ¯ä¸€å †ä¸­å–$j$ä¸ªï¼Œé‚£ä¹ˆä½äºç¬¬$i$å †ï¼Œå·²ç»æ‹¿åˆ°äº†$l$ä¸ªç›˜å­çš„æœ€ä¼˜ç­”æ¡ˆï¼š$$dp[i][l] = \max_{j=0}^{max(l,k)}(dp[i-1][l-j] + sum[i][j])$$$O(Tnkp)$</p><figure class="highlight arduino"><figcaption><span>Plates.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">55</span>][<span class="number">35</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> T = <span class="number">1</span>; T &lt;= t; ++T) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, k, p;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k &gt;&gt; p;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">dp</span><span class="params">(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; (n * k + <span class="number">1</span>))</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= k; ++j) &#123;</span><br><span class="line">                <span class="built_in">cin</span> &gt;&gt; a[i][j];</span><br><span class="line">                a[i][j] += a[i][j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k; ++j) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> l = j; l &lt;= p; ++l) &#123;</span><br><span class="line">                    dp[i][l] = <span class="built_in">max</span>(dp[i][l], dp[i - <span class="number">1</span>][l - j] + a[i][j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            ans = <span class="built_in">max</span>(ans, dp[i][p]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, T, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Workout"><a href="#Workout" class="headerlink" title="Workout"></a>Workout</h2><p>ä¸€ä¸ª$N$ä¸ªæ•°çš„ä¸¥æ ¼é€’å¢æ•°åˆ—ï¼Œåˆ†æˆäº†$N-1$æ®µï¼Œç°åœ¨å¯ä»¥è‡³å¤šæ·»åŠ $K$ä¸ªæ•°ï¼Œé—®æœ€åå½¢æˆçš„ä¸¥æ ¼é€’å¢åºåˆ—çš„å·®å€¼ä¸­çš„æœ€å¤§å€¼å¯ä»¥è¢«æœ€å°åŒ–åˆ°å¤šå°‘ã€‚</p><p>æ­£è§£äºŒåˆ†ï¼Œ$O(Tn\log n)$ã€‚è¢«è‡ªå·±ä¸€å¼€å§‹çš„å‡æ€è·¯éª—åˆ°äº†ï¼Œç½šæ—¶++ã€‚</p><figure class="highlight arduino"><figcaption><span>Workout.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; seg;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = seg.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span> &amp;&amp; seg[i] &gt; x; --i) &#123;</span><br><span class="line">        ret += (seg[i] - <span class="number">1</span>) / x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> T = <span class="number">1</span>; T &lt;= t; ++T) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, k;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line"></span><br><span class="line">        seg.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">int</span> la;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; la;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, p; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; p;</span><br><span class="line">            seg.emplace_back(p - la);</span><br><span class="line">            la = p;</span><br><span class="line">        &#125;</span><br><span class="line">        sort(seg.<span class="built_in">begin</span>(), seg.<span class="built_in">end</span>(), [](<span class="keyword">int</span> x, <span class="keyword">int</span> y) &#123; <span class="keyword">return</span> x &lt; y;&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">1</span>, r = <span class="number">1e9</span>, ans, mid;</span><br><span class="line">        <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">            mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (check(mid) &lt;= k) &#123;</span><br><span class="line">                ans = mid;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, T, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Bundling"><a href="#Bundling" class="headerlink" title="Bundling"></a>Bundling</h2><p>æœ‰$N$ä¸ªä»…å«å¤§å†™å­—æ¯çš„å­—ç¬¦ä¸²ï¼Œç°åœ¨è¦åˆ†æˆ$N/K$ç»„ï¼Œæ¯ç»„çš„æƒå€¼æ˜¯ç»„å†…æœ€é•¿å…¬å…±å‰ç¼€$LCP$çš„é•¿åº¦ï¼Œé—®å¯ä»¥è¾¾åˆ°æœ€å¤§çš„æƒå€¼å’Œæ˜¯å¤šå°‘ã€‚</p><p>å­—å…¸æ ‘ï¼Œ$cnt[x]$æ˜¯$x$è¢«ç»è¿‡çš„æ¬¡æ•°ï¼Œä¹Ÿä»£è¡¨äº†ä»æ ¹åˆ°$x$çš„å‰ç¼€å‡ºç°çš„æ¬¡æ•°ï¼Œæ¯å½“å‰ç¼€å‡ºç°æ¬¡æ•°$â‰¥k$ï¼Œå°±å¯ä»¥åˆ†æˆ$cnt[x]/k$ç»„ï¼Œé‚£ä¹ˆè¿™ä¸ªå‰ç¼€å¯¹ç­”æ¡ˆè´¡çŒ®$cnt[x]/k$ï¼Œ$O(\sum_T \sum_i len(s_i))$ã€‚</p><figure class="highlight arduino"><figcaption><span>Bundling.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="keyword">String</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> csize = <span class="number">26</span>;</span><br><span class="line">    <span class="keyword">int</span> ans, k;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">trie</span> &#123;</span></span><br><span class="line">        <span class="keyword">int</span> ch[N][csize];</span><br><span class="line">        <span class="keyword">int</span> cnt[N];</span><br><span class="line">        <span class="keyword">int</span> numv;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">while</span> (numv) &#123;</span><br><span class="line">                <span class="built_in">memset</span>(ch[numv], <span class="number">0</span>, <span class="keyword">sizeof</span>(ch[numv]));</span><br><span class="line">                cnt[numv] = <span class="number">0</span>;</span><br><span class="line">                --numv;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">memset</span>(ch[numv], <span class="number">0</span>, <span class="keyword">sizeof</span>(ch[numv]));</span><br><span class="line">            cnt[numv] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="built_in">string</span> &amp;s)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> u = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> &amp;c : s) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!ch[u][c - <span class="string">'A'</span>])</span><br><span class="line">                    ch[u][c - <span class="string">'A'</span>] = ++numv;</span><br><span class="line">                u = ch[u][c - <span class="string">'A'</span>];</span><br><span class="line">                ++cnt[u];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numv; ++i) &#123;</span><br><span class="line">                ret += cnt[i] / k;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="keyword">String</span>;</span><br><span class="line"></span><br><span class="line">trie tree;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MYDEBUG</span></span><br><span class="line">    freopen(<span class="string">"../0in.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="comment">//    freopen("../0out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> T = <span class="number">1</span>; T &lt;= t; ++T) &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="built_in">string</span> s;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">        tree.init();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">            tree.insert(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, T, tree.count());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¢˜è§£ </category>
          
          <category> Kickstart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kickstart </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
